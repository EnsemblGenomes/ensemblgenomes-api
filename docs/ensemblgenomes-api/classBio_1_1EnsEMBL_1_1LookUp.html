<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Ensembl Genomes: Bio::EnsEMBL::LookUp Class Reference</title>
<link href="/info/docs/Doxygen/doxygen.css" rel="stylesheet" type="text/css" />
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
</head>
<body>
<div id="top"><!-- do not remove this div! -->

<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr>
  
  
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.4 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<script type="text/javascript">
function hasClass(ele,cls) {
  return ele.className.match(new RegExp('(\\s|^)'+cls+'(\\s|$)'));
}

function addClass(ele,cls) {
  if (!this.hasClass(ele,cls)) ele.className += " "+cls;
}

function removeClass(ele,cls) {
  if (hasClass(ele,cls)) {
    var reg = new RegExp('(\\s|^)'+cls+'(\\s|$)');
    ele.className=ele.className.replace(reg,' ');
  }
}

function toggleVisibility(linkObj) {
 var base = linkObj.getAttribute('id');
 var summary = document.getElementById(base + '-summary');
 var content = document.getElementById(base + '-content');
 var trigger = document.getElementById(base + '-trigger');
 if ( hasClass(linkObj,'closed') ) {
   summary.style.display = 'none';
   content.style.display = 'block';
   trigger.src = 'open.png';
   removeClass(linkObj,'closed');
   addClass(linkObj,'opened');
 } else if ( hasClass(linkObj,'opened') ) {
   summary.style.display = 'block';
   content.style.display = 'none';
   trigger.src = 'closed.png';
   removeClass(linkObj,'opened');
   addClass(linkObj,'closed');
 }
 return false;
}
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Overview</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directory&#160;Browser</span></a></li>
      <li id="searchli">
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="annotated.html"><span>Full&#160;Class&#160;List</span></a></li>
      <li><a href="functions.html"><span>Methods&#160;from&#160;all&#160;packages</span></a></li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('classBio_1_1EnsEMBL_1_1LookUp.html','');
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#pub-methods">Available Methods</a>  </div>
  <div class="headertitle">
<div class="title">Bio::EnsEMBL::LookUp Class Reference</div>  </div>
</div>
<div class="contents">
<!-- doxytag: class="Bio::EnsEMBL::LookUp" -->
<p><a href="classBio_1_1EnsEMBL_1_1LookUp-members.html">List of all members.</a></p>
<hr/><a name="details" id="details"></a><h2>Class Summary</h2>
<div class="textblock"><h2><a class="anchor" id="Synopsis"></a>
Synopsis</h2>
<div class="fragment"><pre class="fragment"><span class="preprocessor"># creation from a database server</span>
<span class="preprocessor"></span><a class="code" href="classBio_1_1EnsEMBL_1_1LookUp.html">Bio::EnsEMBL::LookUp</a>-&gt;<a class="code" href="classBio_1_1EnsEMBL_1_1LookUp.html#aea6c8574894d421b79f1817fdf94cfc7">register_all_dbs</a>( $conf-&gt;{host},
       $conf-&gt;{port}, $conf-&gt;{user}, $conf-&gt;{pass}, $conf-&gt;{db});
my $lookup = <a class="code" href="classBio_1_1EnsEMBL_1_1LookUp.html">Bio::EnsEMBL::LookUp</a>-&gt;<a class="code" href="classBio_1_1EnsEMBL_1_1LookUp.html#a004a9eccc10f89787bab3b32bb4a1366">new</a>();
my $dbas = $lookup-&gt;registry()-&gt;get_all();
$dbas = $lookup-&gt;get_all_by_taxon_id(388919);
$dbas = $lookup-&gt;get_by_name_pattern(<span class="stringliteral">&quot;Escherichia.*&quot;</span>);

<span class="preprocessor"># creation from a URL</span>
<span class="preprocessor">my $lookup = Bio::EnsEMBL::LookUp-&gt;new(-URL=&gt;&#39;http://bacteria.ensembl.org/registry.json&#39;);</span>
</pre></div> <h2><a class="anchor" id="Description"></a>
Description</h2>
 <pre>
This module is a helper that provides additional methods to aid navigating a registry of >6000 species across >25 databases. 
It does not replace the Registry but provides some additional methods for finding species e.g. by searching for species that 
have an alias that match a regular expression, or species which are derived from a specific ENA/INSDC accession, or species
that belong to a particular part of the bacterial taxonomy. 

There are a number of ways of creating a lookup. The simplest and fastest is to supply a URL for a JSON resource that contains all the details
needed to connect to the public Ensembl Genomes bacterial databases e.g.

	my $lookup = Bio::EnsEMBL::LookUp->new(-URL=>'http://bacteria.ensembl.org/registry.json');

Alternatively, a local file containing the required JSON can be specified instead:

	my $lookup = Bio::EnsEMBL::LookUp->new(-FILE=>"/path/to/reg.json");

Finally, a Registry already loaded with the ENA core databases can be supplied:

	my $lookup = Bio::EnsEMBL::LookUp->new(-REGISTRY=>'Bio::EnsEMBL::Registry');

If the standard Registry is used, the argument can be omitted completely:

	my $lookup = Bio::EnsEMBL::LookUp->new();

To populate the registry with just the Ensembl Bacteria databases for the current software release on a specified server, the following method can be used:

	Bio::EnsEMBL::LookUp->register_all_dbs( $host,
	   $port, $user, $pass);

Once a lookup has been created, there are various methods to retreive DBAdaptors for species of interest:

1. To find species by name - all DBAdaptors for species with a name or alias matching the supplied string:

	$dbas = $lookup->get_by_name_exact('Escherichia coli str. K-12 substr. MG1655');

2. To find species by name pattern - all DBAdaptors for species with a name or alias matching the supplied regexp:

	$dbas = $lookup->get_by_name_exact('Escherichia coli .*);

3. To find species with the supplied taxonomy ID:

	$dbas = $lookup->get_all_by_taxon_id(388919);
	
4. In coordination with a taxonomy node adaptor to get DBAs for all descendants of a node:

	my $node = $node_adaptor->fetch_by_taxon_id(511145);
	for my $child (\@{$node_adaptor->fetch_descendants($node)}) {
		my $dbas = $lookup->get_all_by_taxon_id($node->taxon_id())
		if(defined $dbas) {
			for my $dba (\@{$dbas}) {
				# do something with the $dba
			}
		}
	}

The retrieved DBAdaptors can then be used as normal e.g.

	for my $gene (\@{$dba->get_GeneAdaptor()->fetch_all_by_biotype('protein_coding')}) {
		print $gene->external_name."\n";
	}

Once retrieved, the arguments needed for constructing a DBAdaptor directly can be dumped for later use e.g.

	my $args = $lookup->dba_to_args($dba);
	... store and retrieve $args for use in another script ... 
	my $resurrected_dba = Bio::EnsEMBL::DBSQL::DBAdaptor->new(\@$args);
  
</pre> 
<p>Definition at line <a class="el" href="LookUp_8pm_source.html#l00099">99</a> of file <a class="el" href="LookUp_8pm_source.html">LookUp.pm</a>.</p>
</div><table class="memberdecls">
<tr><td colspan="2"><h2><a name="pub-methods"></a>
Available Methods</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">protected&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBio_1_1EnsEMBL_1_1LookUp.html#a30cdd689ab50f38e27ee4fa37059e683">_add_aliases</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">protected&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBio_1_1EnsEMBL_1_1LookUp.html#a542eca972c3d401eae544e9accec8b30">_check_name</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">protected&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBio_1_1EnsEMBL_1_1LookUp.html#a47f8ace61ce2832ba8a63cacce1bad55">_dba_to_locator</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">protected&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBio_1_1EnsEMBL_1_1LookUp.html#a8aac19015f9a8ea9e8cccca0931aa1ee">_dbc_to_locator</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">protected&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBio_1_1EnsEMBL_1_1LookUp.html#a89671082857be14ed0ca5ddf23a79c6b">_get_dbc_meta</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">protected&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBio_1_1EnsEMBL_1_1LookUp.html#ac8ba91cdec4ff65e027de0c64f46d3d6">_hash_dba</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">protected&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBio_1_1EnsEMBL_1_1LookUp.html#aa584d0f004c303da984eb23ad384a704">_hash_dba_from_values</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">protected&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBio_1_1EnsEMBL_1_1LookUp.html#aefa6fd2c97d8889c0b715e7fd54ef7fb">_intern_db_connections</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">protected&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBio_1_1EnsEMBL_1_1LookUp.html#ab18cd74d70d44dacebba7c29b9164a0d">_invert_dba_hash</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">protected&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBio_1_1EnsEMBL_1_1LookUp.html#aa03517a05aa0434e64af86601690e249">_load_registry_from_json</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">protected&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBio_1_1EnsEMBL_1_1LookUp.html#a645cdfa984e937e1319ff33cfbd46970">_login_hash</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">protected&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBio_1_1EnsEMBL_1_1LookUp.html#a0a72324f9672f99d4aea13d8859fff97">_query_multispecies_db</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">protected void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBio_1_1EnsEMBL_1_1LookUp.html#a1eded51d01c169b4e19c07f67a244135">_register_dba</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">protected&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBio_1_1EnsEMBL_1_1LookUp.html#ae1c170846af23c6a517b60a624f98243">_register_multispecies_core</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">protected&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBio_1_1EnsEMBL_1_1LookUp.html#ad00b6b571005b67d4095b576f2c97bb0">_register_multispecies_x</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">protected Arrayref&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBio_1_1EnsEMBL_1_1LookUp.html#a7abd4cada576bc7dc41a272e12c958f6">_registry_to_hash</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">protected&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBio_1_1EnsEMBL_1_1LookUp.html#ae8c32866c3201eb9a71d220179e7bf2d">_registry_to_json</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">protected&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBio_1_1EnsEMBL_1_1LookUp.html#adfc38172d1b847497f162021b3289e55">_runtime_include</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">public File&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBio_1_1EnsEMBL_1_1LookUp.html#a9239ef81d9c9f494812241166c47ef56">cache_file</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">public&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBio_1_1EnsEMBL_1_1LookUp.html#a1fa601916951d0c79bac76ffa6c97254">clear_cache</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">public Arrayref&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBio_1_1EnsEMBL_1_1LookUp.html#ae89d6c48937917b34aa8d1beaab63e03">dba_to_args</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">public Arrayref&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBio_1_1EnsEMBL_1_1LookUp.html#ae13ef532d1636a1f2d265e1299f62d41">get_all</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">public Arrayref&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBio_1_1EnsEMBL_1_1LookUp.html#ab4784c23442d37964f2354b92e209282">get_all_accessions</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">public Arrayref&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBio_1_1EnsEMBL_1_1LookUp.html#a2f7103542090789003d5463ffcb26f94">get_all_assemblies</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">public Arrayref&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBio_1_1EnsEMBL_1_1LookUp.html#af26a61fdf673ad2c50106884a4c92a56">get_all_by_accession</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">public Arrayref&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBio_1_1EnsEMBL_1_1LookUp.html#ac07ec8ac962153683cbaba7424cf9fa5">get_all_by_name_pattern</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">public&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBio_1_1EnsEMBL_1_1LookUp.html#a794139163d42763774ebf516f06a18c0">get_all_by_taxon_branch</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">public Arrayref&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBio_1_1EnsEMBL_1_1LookUp.html#afd01023039df375d140b46f9f7be5eba">get_all_by_taxon_id</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">public Arrayref&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBio_1_1EnsEMBL_1_1LookUp.html#acefceb96f7b59e29b2d441162023796f">get_all_DBConnections</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">public Arrayref&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBio_1_1EnsEMBL_1_1LookUp.html#ae24c855f7cb893ec184a5769d1f60d8a">get_all_names</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">public Arrayref&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBio_1_1EnsEMBL_1_1LookUp.html#a8b6d48542c2b0690b176775dcd3bba34">get_all_taxon_ids</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">public Arrayref&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBio_1_1EnsEMBL_1_1LookUp.html#ac7144f9a188170fc3f907b0ee4b43338">get_all_versioned_accessions</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">public Arrayref&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBio_1_1EnsEMBL_1_1LookUp.html#af23b06aee34134fb71c9602afa45a2ab">get_all_versioned_assemblies</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">public <br class="typebreak"/>
Bio::EnsEMBL::DBSQL::DatabaseAdaptor&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBio_1_1EnsEMBL_1_1LookUp.html#a72f175107ad19de05c93211b351ac88f">get_by_assembly_accession</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">public Arrayref&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBio_1_1EnsEMBL_1_1LookUp.html#a83edc3eac26b29d90771176d977d5e6d">get_by_name_exact</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">public&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBio_1_1EnsEMBL_1_1LookUp.html#a262bdb2cc532bb9b7409fe39c1bdee42">load_registry_from_file</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">public&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBio_1_1EnsEMBL_1_1LookUp.html#a9ef513c9adcfee43c557d8e365feba90">load_registry_from_url</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">public&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBio_1_1EnsEMBL_1_1LookUp.html#a004a9eccc10f89787bab3b32bb4a1366">new</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">public void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBio_1_1EnsEMBL_1_1LookUp.html#aea6c8574894d421b79f1817fdf94cfc7">register_all_dbs</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">public Registry&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBio_1_1EnsEMBL_1_1LookUp.html#ad15dae8e77ae5efcc6394e16a9256fa3">registry</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">public&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBio_1_1EnsEMBL_1_1LookUp.html#aaa0a597bbd7d76c955cd1308564f27b4">update_from_registry</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">public void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBio_1_1EnsEMBL_1_1LookUp.html#af9177536cfa09ec822b5cc44b4f1064d">write_registry_to_file</a> ()</td></tr>
</table>
<hr/><h2>Method Documentation</h2>
<a class="anchor" id="a30cdd689ab50f38e27ee4fa37059e683"></a><!-- doxytag: member="Bio::EnsEMBL::LookUp::_add_aliases" ref="a30cdd689ab50f38e27ee4fa37059e683" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">protected Bio::EnsEMBL::LookUp::_add_aliases </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<pre>	Description : Registry all aliases
	Argument	: Species name
	Argument	: Arrayref of alias strings
 </pre><div id="codesection-_add_aliases" class="dynheader closed" style="cursor:pointer;" onclick="return toggleVisibility(this)">  
	<img id='codesection-_add_aliases-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-_add_aliases-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-_add_aliases-content' class='dyncontent' style='display: none;'> 
 <div class="fragment"><pre class="fragment">sub <a class="code" href="classBio_1_1EnsEMBL_1_1LookUp.html#a30cdd689ab50f38e27ee4fa37059e683">_add_aliases</a> {
  my ($species_name, $alias_ref) = @_;
  <span class="keywordflow">if</span> (defined $alias_ref) {
    <span class="keywordflow">if</span> (ref($alias_ref) ne <span class="stringliteral">&#39;ARRAY&#39;</span>) {
      $alias_ref = [$alias_ref];
    }

    <span class="keywordflow">if</span> (scalar(@{$alias_ref}) &gt; 0) {
      Bio::EnsEMBL::Utils::ConfigRegistry-&gt;add_alias(-species =&gt; $species_name,
                                                     -alias   =&gt; $alias_ref);
    }
  }
  <span class="keywordflow">return</span>;
}
</pre></div> </div> 
</div>
</div>
<a class="anchor" id="a542eca972c3d401eae544e9accec8b30"></a><!-- doxytag: member="Bio::EnsEMBL::LookUp::_check_name" ref="a542eca972c3d401eae544e9accec8b30" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">protected Bio::EnsEMBL::LookUp::_check_name </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<pre>	Description : Check that the name is not longer than 64 characters
	Argument	: Name to check
 </pre><div id="codesection-_check_name" class="dynheader closed" style="cursor:pointer;" onclick="return toggleVisibility(this)">  
	<img id='codesection-_check_name-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-_check_name-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-_check_name-content' class='dyncontent' style='display: none;'> 
 <div class="fragment"><pre class="fragment">sub <a class="code" href="classBio_1_1EnsEMBL_1_1LookUp.html#a542eca972c3d401eae544e9accec8b30">_check_name</a> {
<span class="preprocessor">  #Throws a wobbly if the db name is longer than 64 characters</span>
<span class="preprocessor"></span>  my ($name) = @_;
  my $length = length($name);
  <span class="keywordflow">throw</span>(<span class="stringliteral">&quot;Invalid length for database name used. Max is 64. The name ${name}- was ${length}&quot;</span>) <span class="keywordflow">if</span> $length &gt; 64;
  <span class="keywordflow">return</span>;
}
</pre></div> </div> 
</div>
</div>
<a class="anchor" id="a47f8ace61ce2832ba8a63cacce1bad55"></a><!-- doxytag: member="Bio::EnsEMBL::LookUp::_dba_to_locator" ref="a47f8ace61ce2832ba8a63cacce1bad55" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">protected Bio::EnsEMBL::LookUp::_dba_to_locator </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<pre>	Description : return a hash key for a DBAdaptor
	Argument	: Bio::EnsEMBL::DBAdaptor
 </pre><div id="codesection-_dba_to_locator" class="dynheader closed" style="cursor:pointer;" onclick="return toggleVisibility(this)">  
	<img id='codesection-_dba_to_locator-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-_dba_to_locator-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-_dba_to_locator-content' class='dyncontent' style='display: none;'> 
 <div class="fragment"><pre class="fragment">sub <a class="code" href="classBio_1_1EnsEMBL_1_1LookUp.html#a47f8ace61ce2832ba8a63cacce1bad55">_dba_to_locator</a> {
  my ($dba) = @_;
  confess(<span class="stringliteral">&quot;Argument must be Bio::EnsEMBL::DBSQL::DBAdaptor not &quot;</span> . ref($dba))
    unless ref($dba) eq &quot;Bio::EnsEMBL::DBSQL::DBAdaptor&quot;;
  my $locator = join(q{!-!}, $dba-&gt;species_id(), <a class="code" href="classBio_1_1EnsEMBL_1_1LookUp.html#a8aac19015f9a8ea9e8cccca0931aa1ee">_dbc_to_locator</a>($dba-&gt;dbc()));
  <span class="keywordflow">return</span> $locator;
}
</pre></div> </div> 
</div>
</div>
<a class="anchor" id="a8aac19015f9a8ea9e8cccca0931aa1ee"></a><!-- doxytag: member="Bio::EnsEMBL::LookUp::_dbc_to_locator" ref="a8aac19015f9a8ea9e8cccca0931aa1ee" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">protected Bio::EnsEMBL::LookUp::_dbc_to_locator </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<pre>	Description : return a hash key for a DBConnection
	Argument	: Bio::EnsEMBL::DBConnection
 </pre><div id="codesection-_dbc_to_locator" class="dynheader closed" style="cursor:pointer;" onclick="return toggleVisibility(this)">  
	<img id='codesection-_dbc_to_locator-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-_dbc_to_locator-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-_dbc_to_locator-content' class='dyncontent' style='display: none;'> 
 <div class="fragment"><pre class="fragment">sub <a class="code" href="classBio_1_1EnsEMBL_1_1LookUp.html#a8aac19015f9a8ea9e8cccca0931aa1ee">_dbc_to_locator</a> {
  my ($dbc) = @_;
  my $locator = join(q{!-!}, $dbc-&gt;host(), $dbc-&gt;dbname(), $dbc-&gt;driver(), $dbc-&gt;port(), $dbc-&gt;username());
  <span class="keywordflow">return</span> $locator;
}
</pre></div> </div> 
</div>
</div>
<a class="anchor" id="a89671082857be14ed0ca5ddf23a79c6b"></a><!-- doxytag: member="Bio::EnsEMBL::LookUp::_get_dbc_meta" ref="a89671082857be14ed0ca5ddf23a79c6b" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">protected Bio::EnsEMBL::LookUp::_get_dbc_meta </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Undocumented method</p>
<div id="codesection-_get_dbc_meta" class="dynheader closed" style="cursor:pointer;" onclick="return toggleVisibility(this)">  
	<img id='codesection-_get_dbc_meta-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-_get_dbc_meta-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-_get_dbc_meta-content' class='dyncontent' style='display: none;'> 
 <div class="fragment"><pre class="fragment">sub <a class="code" href="classBio_1_1EnsEMBL_1_1LookUp.html#a89671082857be14ed0ca5ddf23a79c6b">_get_dbc_meta</a> {
  my ($self, $dbc) = @_;
  my $name = $dbc-&gt;dbname();
  <span class="keywordflow">if</span> (!defined $self-&gt;{dbc_meta}{$name}) {
<span class="preprocessor">    # load metadata in batch for the whole database</span>
<span class="preprocessor"></span>    $self-&gt;{dbc_meta}{$name} = {};
<span class="preprocessor">    # taxid</span>
<span class="preprocessor"></span>
    $dbc-&gt;sql_helper()-&gt;execute(
      -SQL      =&gt; q/select species_id,meta_value from meta where meta_key=<span class="stringliteral">&#39;species.taxonomy_id&#39;</span>/,
      -PARAMS   =&gt; [],
      -CALLBACK =&gt; sub {
        my $row = shift @_;
        $self-&gt;{dbc_meta}{$name}{$row-&gt;[0]}{taxid} = $row-&gt;[1];
      });
<span class="preprocessor">    # aliases</span>
<span class="preprocessor"></span>    $dbc-&gt;sql_helper()-&gt;execute(
      -SQL      =&gt; <span class="stringliteral">&#39;select species_id,meta_value from meta where meta_key=\&#39;species.alias\&#39;&#39;</span>,
      -PARAMS   =&gt; [],
      -CALLBACK =&gt; sub {
        my @row = @{shift @_};
        push @{$self-&gt;{dbc_meta}{$name}{$row[0]}{aliases}}, $row[1];
      });
<span class="preprocessor">    # assembly.accession</span>
<span class="preprocessor"></span>    $dbc-&gt;sql_helper()-&gt;execute(
      -SQL      =&gt; <span class="stringliteral">&#39;select species_id,meta_value from meta where meta_key=\&#39;assembly.accession\&#39;&#39;</span>,
      -PARAMS   =&gt; [],
      -CALLBACK =&gt; sub {
        my @row = @{shift @_};
        $self-&gt;{dbc_meta}{$name}{$row[0]}{assembly_accession} = $row[1];
      });
<span class="preprocessor">    # seq_region_names and synonyms</span>
<span class="preprocessor"></span>    $dbc-&gt;sql_helper()-&gt;execute(
      -SQL =&gt; q/select cs.species_id,sr.name,ss.synonym from coord_system cs 
      join seq_region sr using (coord_system_id) 
      left join seq_region_synonym ss <span class="keyword">using</span> (seq_region_id)/,
      -PARAMS   =&gt; [],
      -CALLBACK =&gt; sub {
        my @row = @{shift @_};
        push @{$self-&gt;{dbc_meta}{$name}{$row[0]}{accessions}}, $row[1];
        <span class="keywordflow">if</span> (defined $row[2]) {
          push @{$self-&gt;{dbc_meta}{$name}{$row[0]}{accessions}}, $row[2];
        }
      });
  } ## end <span class="keywordflow">if</span> (!defined $self-&gt;{dbc_meta...})
  <span class="keywordflow">return</span> $self-&gt;{dbc_meta}{$name};
} ## end sub <a class="code" href="classBio_1_1EnsEMBL_1_1LookUp.html#a89671082857be14ed0ca5ddf23a79c6b">_get_dbc_meta</a>
</pre></div> </div> 
</div>
</div>
<a class="anchor" id="ac8ba91cdec4ff65e027de0c64f46d3d6"></a><!-- doxytag: member="Bio::EnsEMBL::LookUp::_hash_dba" ref="ac8ba91cdec4ff65e027de0c64f46d3d6" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">protected Bio::EnsEMBL::LookUp::_hash_dba </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<pre>	Description : Add details from a DBAdaptor to the internal hashes of details
	Argument	: Bio::EnsEMBL::DBAdaptor
 </pre><div id="codesection-_hash_dba" class="dynheader closed" style="cursor:pointer;" onclick="return toggleVisibility(this)">  
	<img id='codesection-_hash_dba-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-_hash_dba-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-_hash_dba-content' class='dyncontent' style='display: none;'> 
 <div class="fragment"><pre class="fragment">sub <a class="code" href="classBio_1_1EnsEMBL_1_1LookUp.html#ac8ba91cdec4ff65e027de0c64f46d3d6">_hash_dba</a> {
  my ($self, $dba) = @_;
  my $dbc_meta = $self-&gt;_get_dbc_meta($dba-&gt;dbc());
  my $dba_meta = $dbc_meta-&gt;{$dba-&gt;species_id()};
  $self-&gt;_hash_dba_from_values($dba, [$dba_meta-&gt;{taxid}], $dba_meta-&gt;{aliases}, $dba_meta-&gt;{accessions}, $dba_meta-&gt;{assembly_accession});
  <span class="keywordflow">return</span>;
}
</pre></div> </div> 
</div>
</div>
<a class="anchor" id="aa584d0f004c303da984eb23ad384a704"></a><!-- doxytag: member="Bio::EnsEMBL::LookUp::_hash_dba_from_values" ref="aa584d0f004c303da984eb23ad384a704" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">protected Bio::EnsEMBL::LookUp::_hash_dba_from_values </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<pre>	Description : Add supplied details to the internal hashes of details
	Argument	: Bio::EnsEMBL::DBAdaptor to hash
	Argument	: Arrayref of taxonomy IDs to use as keys
	Argument	: Arrayref of aliases to use as keys
	Argument	: Arrayref of ENA accessions to use as keys
 </pre><div id="codesection-_hash_dba_from_values" class="dynheader closed" style="cursor:pointer;" onclick="return toggleVisibility(this)">  
	<img id='codesection-_hash_dba_from_values-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-_hash_dba_from_values-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-_hash_dba_from_values-content' class='dyncontent' style='display: none;'> 
 <div class="fragment"><pre class="fragment">sub <a class="code" href="classBio_1_1EnsEMBL_1_1LookUp.html#aa584d0f004c303da984eb23ad384a704">_hash_dba_from_values</a> {
  my ($self, $dba, $taxids, $aliases, $accessions, $vgc) = @_;

  <span class="keywordflow">for</span> my $taxid (@{$taxids}) {
    push @{$self-&gt;{dbas_by_taxid}{$taxid}}, $dba;
  }
  <span class="keywordflow">for</span> my $name (uniq(@{$aliases})) {
    push @{$self-&gt;{dbas_by_name}{$name}}, $dba;
  }
  <span class="keywordflow">for</span> my $acc (uniq(@{$accessions})) {
    push @{$self-&gt;{dbas_by_vacc}{$acc}}, $dba;
    $acc =~ s/\.[0-9]+$<span class="comment">//x;</span>
    push @{$self-&gt;{dbas_by_acc}{$acc}}, $dba;
  }
  <span class="keywordflow">if</span> (defined $vgc) {
    <span class="keywordflow">if</span> (defined $self-&gt;{dbas_by_vgc}{$vgc}) {
      croak <span class="stringliteral">&quot;DBA with GC accession $vgc already registered&quot;</span>;
    }
    $self-&gt;{dbas_by_vgc}{$vgc} = $dba;
    $vgc =~ s/\.[0-9]+$<span class="comment">//x;</span>
    <span class="keywordflow">if</span> (defined $self-&gt;{dbas_by_gc}{$vgc}) {
      croak <span class="stringliteral">&quot;DBA with GC set chain $vgc already registered&quot;</span>;
    }
    $self-&gt;{dbas_by_gc}{$vgc} = $dba;
  }
  push @{$self-&gt;{dbas}}, $dba;
  <span class="keywordflow">return</span>;
} ## end sub <a class="code" href="classBio_1_1EnsEMBL_1_1LookUp.html#aa584d0f004c303da984eb23ad384a704">_hash_dba_from_values</a>
</pre></div> </div> 
</div>
</div>
<a class="anchor" id="aefa6fd2c97d8889c0b715e7fd54ef7fb"></a><!-- doxytag: member="Bio::EnsEMBL::LookUp::_intern_db_connections" ref="aefa6fd2c97d8889c0b715e7fd54ef7fb" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">protected Bio::EnsEMBL::LookUp::_intern_db_connections </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<pre>  Description : Go through all available DBAdaptors of registry and ensure they use the same
                DBConnection instance.
  Exceptions  : None
  Status      : At Risk
 </pre><div id="codesection-_intern_db_connections" class="dynheader closed" style="cursor:pointer;" onclick="return toggleVisibility(this)">  
	<img id='codesection-_intern_db_connections-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-_intern_db_connections-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-_intern_db_connections-content' class='dyncontent' style='display: none;'> 
 <div class="fragment"><pre class="fragment">sub <a class="code" href="classBio_1_1EnsEMBL_1_1LookUp.html#aefa6fd2c97d8889c0b715e7fd54ef7fb">_intern_db_connections</a> {
  my ($self) = @_;
  my $adaptors = $self-&gt;registry()-&gt;get_all_DBAdaptors();
  my %dbc_intern;
  <span class="keywordflow">foreach</span> my $dba (@{$adaptors}) {
    my $dbc     = $dba-&gt;dbc();
    my $locator = <a class="code" href="classBio_1_1EnsEMBL_1_1LookUp.html#a8aac19015f9a8ea9e8cccca0931aa1ee">_dbc_to_locator</a>($dbc);
    <span class="keywordflow">if</span> (exists $dbc_intern{$locator}) {
      $dba-&gt;dbc($dbc_intern{$locator});
    } <span class="keywordflow">else</span> {
      $dbc_intern{$locator} = $dba-&gt;dbc();
    }
  }
  <span class="keywordflow">return</span>;
}
</pre></div> </div> 
</div>
</div>
<a class="anchor" id="ab18cd74d70d44dacebba7c29b9164a0d"></a><!-- doxytag: member="Bio::EnsEMBL::LookUp::_invert_dba_hash" ref="ab18cd74d70d44dacebba7c29b9164a0d" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">protected Bio::EnsEMBL::LookUp::_invert_dba_hash </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Undocumented method</p>
<div id="codesection-_invert_dba_hash" class="dynheader closed" style="cursor:pointer;" onclick="return toggleVisibility(this)">  
	<img id='codesection-_invert_dba_hash-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-_invert_dba_hash-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-_invert_dba_hash-content' class='dyncontent' style='display: none;'> 
 <div class="fragment"><pre class="fragment">sub <a class="code" href="classBio_1_1EnsEMBL_1_1LookUp.html#ab18cd74d70d44dacebba7c29b9164a0d">_invert_dba_hash</a> {
  my ($hash) = @_;
  my $inv_hash;
  <span class="keywordflow">while</span> (my ($item, $dbas) = each(%{$hash})) {
    <span class="keywordflow">if</span> (ref $dbas ne <span class="stringliteral">&#39;ARRAY&#39;</span>) {
      $dbas = [$dbas];
    }
    <span class="keywordflow">for</span> my $dba (@{$dbas}) {
      my $dba_loc = <a class="code" href="classBio_1_1EnsEMBL_1_1LookUp.html#a47f8ace61ce2832ba8a63cacce1bad55">_dba_to_locator</a>($dba);
      push @{$inv_hash-&gt;{$dba_loc}}, $item;
    }
  }
  <span class="keywordflow">return</span> $inv_hash;
}
</pre></div> </div> 
</div>
</div>
<a class="anchor" id="aa03517a05aa0434e64af86601690e249"></a><!-- doxytag: member="Bio::EnsEMBL::LookUp::_load_registry_from_json" ref="aa03517a05aa0434e64af86601690e249" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">protected Bio::EnsEMBL::LookUp::_load_registry_from_json </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<pre>	Description	: load the registry from the supplied JSON string
	Argument	: JSON string
 </pre><div id="codesection-_load_registry_from_json" class="dynheader closed" style="cursor:pointer;" onclick="return toggleVisibility(this)">  
	<img id='codesection-_load_registry_from_json-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-_load_registry_from_json-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-_load_registry_from_json-content' class='dyncontent' style='display: none;'> 
 <div class="fragment"><pre class="fragment">sub <a class="code" href="classBio_1_1EnsEMBL_1_1LookUp.html#aa03517a05aa0434e64af86601690e249">_load_registry_from_json</a> {
  my ($self, $json) = @_;
  my $reg_arr = decode_json($json);
  <span class="keywordflow">for</span> my $dbc_h (@{$reg_arr}) {
    my $dbc = Bio::EnsEMBL::DBSQL::DBConnection-&gt;new(-driver   =&gt; $dbc_h-&gt;{driver},
                                                     -host     =&gt; $dbc_h-&gt;{host},
                                                     -port     =&gt; $dbc_h-&gt;{port},
                                                     -user     =&gt; $dbc_h-&gt;{username},
                                                     -password =&gt; $dbc_h-&gt;{password},
                                                     -dbname   =&gt; $dbc_h-&gt;{dbname});
    <span class="keywordflow">for</span> my $species (@{$dbc_h-&gt;{species}}) {
      my $dba = Bio::EnsEMBL::DBSQL::DBAdaptor-&gt;new(-DBCONN          =&gt; $dbc,
                                                    -species         =&gt; $species-&gt;{species},
                                                    -species_id      =&gt; $species-&gt;{species_id},
                                                    -multispecies_db =&gt; 1,
                                                    -group           =&gt; <span class="stringliteral">&#39;core&#39;</span>,);
<span class="preprocessor">      # no need to register - found automagically</span>
<span class="preprocessor"></span>      my $gc = $species-&gt;{gc};
      <span class="keywordflow">if</span> (ref $gc eq <span class="stringliteral">&#39;ARRAY&#39;</span>) { $gc = $gc-&gt;[0]; }
      $self-&gt;_hash_dba_from_values($dba, $species-&gt;{taxids}, $species-&gt;{aliases}, $species-&gt;{accessions}, $species-&gt;{gc});
    }
  }
  $self-&gt;_intern_db_connections();
  <span class="keywordflow">return</span>;
} ## end sub <a class="code" href="classBio_1_1EnsEMBL_1_1LookUp.html#aa03517a05aa0434e64af86601690e249">_load_registry_from_json</a>
</pre></div> </div> 
</div>
</div>
<a class="anchor" id="a645cdfa984e937e1319ff33cfbd46970"></a><!-- doxytag: member="Bio::EnsEMBL::LookUp::_login_hash" ref="a645cdfa984e937e1319ff33cfbd46970" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">protected Bio::EnsEMBL::LookUp::_login_hash </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<pre>	Description : Generate dbadaptor login hash from supplied arguments
	Argument	: Host
	Argument	: Port
	Argument	: User
	Argument	: Password
 </pre><div id="codesection-_login_hash" class="dynheader closed" style="cursor:pointer;" onclick="return toggleVisibility(this)">  
	<img id='codesection-_login_hash-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-_login_hash-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-_login_hash-content' class='dyncontent' style='display: none;'> 
 <div class="fragment"><pre class="fragment">sub <a class="code" href="classBio_1_1EnsEMBL_1_1LookUp.html#a645cdfa984e937e1319ff33cfbd46970">_login_hash</a> {
  my ($host, $port, $user, $pass) = @_;
  my %details = (-HOST =&gt; $host, -PORT =&gt; $port, -USER =&gt; $user);
  $details{-PASS} = $pass <span class="keywordflow">if</span> defined $pass;
  <span class="keywordflow">return</span> %details;
}
</pre></div> </div> 
</div>
</div>
<a class="anchor" id="a0a72324f9672f99d4aea13d8859fff97"></a><!-- doxytag: member="Bio::EnsEMBL::LookUp::_query_multispecies_db" ref="a0a72324f9672f99d4aea13d8859fff97" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">protected Bio::EnsEMBL::LookUp::_query_multispecies_db </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<pre>	Description : Find all species in the multispecies database
 </pre><div id="codesection-_query_multispecies_db" class="dynheader closed" style="cursor:pointer;" onclick="return toggleVisibility(this)">  
	<img id='codesection-_query_multispecies_db-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-_query_multispecies_db-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-_query_multispecies_db-content' class='dyncontent' style='display: none;'> 
 <div class="fragment"><pre class="fragment">sub <a class="code" href="classBio_1_1EnsEMBL_1_1LookUp.html#a0a72324f9672f99d4aea13d8859fff97">_query_multispecies_db</a> {
  my ($species, %db_args) = @_;
  my @species_array;
  eval {
    my $dbh = Bio::EnsEMBL::DBSQL::DBConnection-&gt;new(%db_args);
    my $sql;
    my @params = (<span class="stringliteral">&#39;species.db_name&#39;</span>);

    <span class="keywordflow">if</span> (defined $species) {
      $sql = <span class="stringliteral">&#39;select meta_value, species_id from meta where meta_key =? and meta_value =?&#39;</span>;
      push(@params, $species);
    } <span class="keywordflow">else</span> {
      $sql = <span class="stringliteral">&#39;select distinct meta_value, species_id from meta where meta_key =? and species_id is not null&#39;</span>;
    }
    my $sth = $dbh-&gt;prepare($sql);
    $sth-&gt;execute(@params);
    <span class="keywordflow">while</span> (my $row = $sth-&gt;fetchrow_arrayref()) {
      my ($species_name, $species_id) = @{$row};
      push(@species_array, {
            <span class="stringliteral">&#39;-SPECIES&#39;</span>    =&gt; $species_name,
            <span class="stringliteral">&#39;-SPECIES_ID&#39;</span> =&gt; $species_id});
    }
    $sth-&gt;finish();
  };
  <span class="keywordflow">throw</span>(<span class="stringliteral">&quot;Error detected: $@&quot;</span>) <span class="keywordflow">if</span> $@;
  <span class="keywordflow">return</span> \@species_array;
} ## end sub <a class="code" href="classBio_1_1EnsEMBL_1_1LookUp.html#a0a72324f9672f99d4aea13d8859fff97">_query_multispecies_db</a>
</pre></div> </div> 
</div>
</div>
<a class="anchor" id="a1eded51d01c169b4e19c07f67a244135"></a><!-- doxytag: member="Bio::EnsEMBL::LookUp::_register_dba" ref="a1eded51d01c169b4e19c07f67a244135" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">protected void Bio::EnsEMBL::LookUp::_register_dba </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<pre>	Description	: Add a single DBAdaptor to the registry and the internal hashes of details
	Argument	: Bio::EnsEMBL::DBAdaptor
	Return		: None
 </pre><div id="codesection-_register_dba" class="dynheader closed" style="cursor:pointer;" onclick="return toggleVisibility(this)">  
	<img id='codesection-_register_dba-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-_register_dba-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-_register_dba-content' class='dyncontent' style='display: none;'> 
 <div class="fragment"><pre class="fragment">sub <a class="code" href="classBio_1_1EnsEMBL_1_1LookUp.html#a1eded51d01c169b4e19c07f67a244135">_register_dba</a> {
  my ($self, $species, $dba) = @_;
  $self-&gt;registry()-&gt;add_DBAdaptor($species, <span class="stringliteral">&quot;core&quot;</span>, $dba);
  $self-&gt;_hash_dba($dba);
  <span class="keywordflow">return</span>;
}
</pre></div> </div> 
</div>
</div>
<a class="anchor" id="ae1c170846af23c6a517b60a624f98243"></a><!-- doxytag: member="Bio::EnsEMBL::LookUp::_register_multispecies_core" ref="ae1c170846af23c6a517b60a624f98243" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">protected Bio::EnsEMBL::LookUp::_register_multispecies_core </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<pre>	Description : Register core dbas for all species in the supplied database
 </pre><div id="codesection-_register_multispecies_core" class="dynheader closed" style="cursor:pointer;" onclick="return toggleVisibility(this)">  
	<img id='codesection-_register_multispecies_core-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-_register_multispecies_core-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-_register_multispecies_core-content' class='dyncontent' style='display: none;'> 
 <div class="fragment"><pre class="fragment">sub <a class="code" href="classBio_1_1EnsEMBL_1_1LookUp.html#ae1c170846af23c6a517b60a624f98243">_register_multispecies_core</a> {
  <span class="keywordflow">return</span> <a class="code" href="classBio_1_1EnsEMBL_1_1LookUp.html#ad00b6b571005b67d4095b576f2c97bb0">_register_multispecies_x</a>(
    <span class="stringliteral">&#39;Bio::EnsEMBL::DBSQL::DBAdaptor&#39;</span>,
    sub {
</pre></div> </div> 
</div>
</div>
<a class="anchor" id="ad00b6b571005b67d4095b576f2c97bb0"></a><!-- doxytag: member="Bio::EnsEMBL::LookUp::_register_multispecies_x" ref="ad00b6b571005b67d4095b576f2c97bb0" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">protected Bio::EnsEMBL::LookUp::_register_multispecies_x </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<pre>	Description : Register specified dba type for all species in the supplied database
 </pre><div id="codesection-_register_multispecies_x" class="dynheader closed" style="cursor:pointer;" onclick="return toggleVisibility(this)">  
	<img id='codesection-_register_multispecies_x-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-_register_multispecies_x-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-_register_multispecies_x-content' class='dyncontent' style='display: none;'> 
 <div class="fragment"><pre class="fragment">sub <a class="code" href="classBio_1_1EnsEMBL_1_1LookUp.html#ad00b6b571005b67d4095b576f2c97bb0">_register_multispecies_x</a> {

  my ($adaptor, $closure, $host, $port, $user, $pass, $instance, $species, $alias_arr_ref, $disconnect_when_idle) = @_;
  <a class="code" href="classBio_1_1EnsEMBL_1_1LookUp.html#adfc38172d1b847497f162021b3289e55">_runtime_include</a>($adaptor);
  <a class="code" href="classBio_1_1EnsEMBL_1_1LookUp.html#a542eca972c3d401eae544e9accec8b30">_check_name</a>($instance);
  my %args = (<a class="code" href="classBio_1_1EnsEMBL_1_1LookUp.html#a645cdfa984e937e1319ff33cfbd46970">_login_hash</a>($host, $port, $user, $pass), <span class="stringliteral">&#39;-DBNAME&#39;</span>, $instance);
  my @species_array = @{<a class="code" href="classBio_1_1EnsEMBL_1_1LookUp.html#a0a72324f9672f99d4aea13d8859fff97">_query_multispecies_db</a>($species, %args)};
  my @dbas;

  <span class="keywordflow">foreach</span> my $species_args (@species_array) {
    my %new_args = (%args, %{$species_args}, <span class="stringliteral">&#39;-MULTISPECIES_DB&#39;</span> =&gt; 1);
    $new_args{-DISCONNECT_WHEN_INACTIVE} = 1 <span class="keywordflow">if</span> $disconnect_when_idle;
    my $dba = $closure-&gt;(%new_args);
    <span class="keywordflow">if</span> (defined $species &amp;&amp; defined $alias_arr_ref) {
      <a class="code" href="classBio_1_1EnsEMBL_1_1LookUp.html#a30cdd689ab50f38e27ee4fa37059e683">_add_aliases</a>($species, $alias_arr_ref);
    }
    push(@dbas, $dba);
  }
  <span class="keywordflow">return</span> \@dbas;
}
</pre></div> </div> 
</div>
</div>
<a class="anchor" id="a7abd4cada576bc7dc41a272e12c958f6"></a><!-- doxytag: member="Bio::EnsEMBL::LookUp::_registry_to_hash" ref="a7abd4cada576bc7dc41a272e12c958f6" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">protected Arrayref Bio::EnsEMBL::LookUp::_registry_to_hash </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<pre>	Description	: Generate a hash array structure for the current registry and species details for turning to JSON
	Returns		: Arrayref of hashes
 </pre><div id="codesection-_registry_to_hash" class="dynheader closed" style="cursor:pointer;" onclick="return toggleVisibility(this)">  
	<img id='codesection-_registry_to_hash-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-_registry_to_hash-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-_registry_to_hash-content' class='dyncontent' style='display: none;'> 
 <div class="fragment"><pre class="fragment">sub <a class="code" href="classBio_1_1EnsEMBL_1_1LookUp.html#a7abd4cada576bc7dc41a272e12c958f6">_registry_to_hash</a> {
  my ($self) = @_;
<span class="preprocessor">  # hash dbcs and dbas by locators</span>
<span class="preprocessor"></span>  my $dbc_hash;
  my $dba_hash;
  <span class="keywordflow">for</span> my $dba (@{$self-&gt;{dbas}}) {
    my $dbc_loc = <a class="code" href="classBio_1_1EnsEMBL_1_1LookUp.html#a8aac19015f9a8ea9e8cccca0931aa1ee">_dbc_to_locator</a>($dba-&gt;dbc());
    $dbc_hash-&gt;{$dbc_loc} = $dba-&gt;dbc();
    push @{$dba_hash-&gt;{$dbc_loc}}, $dba;
  }
<span class="preprocessor">  # create auxillary hashes</span>
<span class="preprocessor"></span>  my $acc_hash   = <a class="code" href="classBio_1_1EnsEMBL_1_1LookUp.html#ab18cd74d70d44dacebba7c29b9164a0d">_invert_dba_hash</a>($self-&gt;{dbas_by_vacc});
  my $name_hash  = <a class="code" href="classBio_1_1EnsEMBL_1_1LookUp.html#ab18cd74d70d44dacebba7c29b9164a0d">_invert_dba_hash</a>($self-&gt;{dbas_by_name});
  my $taxid_hash = <a class="code" href="classBio_1_1EnsEMBL_1_1LookUp.html#ab18cd74d70d44dacebba7c29b9164a0d">_invert_dba_hash</a>($self-&gt;{dbas_by_taxid});
  my $gc_hash    = <a class="code" href="classBio_1_1EnsEMBL_1_1LookUp.html#ab18cd74d70d44dacebba7c29b9164a0d">_invert_dba_hash</a>($self-&gt;{dbas_by_vgc});
<span class="preprocessor">  # create array of hashes</span>
<span class="preprocessor"></span>  my $out_arr;
  <span class="keywordflow">while</span> (my ($dbc_loc, $dbconn) = each(%{$dbc_hash})) {
    my $dbc_h = {driver   =&gt; $dbconn-&gt;driver(),
                 host     =&gt; $dbconn-&gt;host(),
                 port     =&gt; $dbconn-&gt;port(),
                 username =&gt; $dbconn-&gt;username(),
                 password =&gt; $dbconn-&gt;password(),
                 dbname   =&gt; $dbconn-&gt;dbname(),
                 species  =&gt; []};
    <span class="keywordflow">for</span> my $dba (@{$dba_hash-&gt;{$dbc_loc}}) {
      my $dba_loc = <a class="code" href="classBio_1_1EnsEMBL_1_1LookUp.html#a47f8ace61ce2832ba8a63cacce1bad55">_dba_to_locator</a>($dba);
      my $gc      = $gc_hash-&gt;{$dba_loc};
      <span class="keywordflow">if</span> (ref $gc eq <span class="stringliteral">&#39;ARRAY&#39;</span>) {
        $gc = $gc-&gt;[0];
      }
      push @{$dbc_h-&gt;{species}}, {
         species_id =&gt; $dba-&gt;species_id(),
         species    =&gt; $dba-&gt;species(),
         taxids     =&gt; $taxid_hash-&gt;{$dba_loc},
         aliases    =&gt; $name_hash-&gt;{$dba_loc},
         accessions =&gt; $acc_hash-&gt;{$dba_loc},
         gc         =&gt; $gc};
    }
    push @{$out_arr}, $dbc_h;
  }
  <span class="keywordflow">return</span> $out_arr;
} ## end sub <a class="code" href="classBio_1_1EnsEMBL_1_1LookUp.html#a7abd4cada576bc7dc41a272e12c958f6">_registry_to_hash</a>
</pre></div> </div> 
</div>
</div>
<a class="anchor" id="ae8c32866c3201eb9a71d220179e7bf2d"></a><!-- doxytag: member="Bio::EnsEMBL::LookUp::_registry_to_json" ref="ae8c32866c3201eb9a71d220179e7bf2d" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">protected Bio::EnsEMBL::LookUp::_registry_to_json </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Undocumented method</p>
<div id="codesection-_registry_to_json" class="dynheader closed" style="cursor:pointer;" onclick="return toggleVisibility(this)">  
	<img id='codesection-_registry_to_json-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-_registry_to_json-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-_registry_to_json-content' class='dyncontent' style='display: none;'> 
 <div class="fragment"><pre class="fragment">sub <a class="code" href="classBio_1_1EnsEMBL_1_1LookUp.html#ae8c32866c3201eb9a71d220179e7bf2d">_registry_to_json</a> {
  my ($self) = @_;
  my $out_arr = $self-&gt;_registry_to_hash();
  my $json;
  <span class="keywordflow">if</span> ($out_arr) {
    $json = encode_json($out_arr);
  } <span class="keywordflow">else</span> {
    carp(<span class="stringliteral">&#39;No DBAs found&#39;</span>);
  }
  <span class="keywordflow">return</span> $json;
}
</pre></div> </div> 
</div>
</div>
<a class="anchor" id="adfc38172d1b847497f162021b3289e55"></a><!-- doxytag: member="Bio::EnsEMBL::LookUp::_runtime_include" ref="adfc38172d1b847497f162021b3289e55" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">protected Bio::EnsEMBL::LookUp::_runtime_include </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<pre>	Description : Load the specified module (usually a DatabaseAdaptor)
	Argument 	: Module name
 </pre><div id="codesection-_runtime_include" class="dynheader closed" style="cursor:pointer;" onclick="return toggleVisibility(this)">  
	<img id='codesection-_runtime_include-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-_runtime_include-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-_runtime_include-content' class='dyncontent' style='display: none;'> 
 <div class="fragment"><pre class="fragment">sub <a class="code" href="classBio_1_1EnsEMBL_1_1LookUp.html#adfc38172d1b847497f162021b3289e55">_runtime_include</a> {
  my ($full_module) = @_;
<span class="preprocessor">  ## no critic (ProhibitStringyEval)</span>
<span class="preprocessor"></span>  eval <span class="stringliteral">&quot;use ${full_module}&quot;</span>
    || <span class="keywordflow">throw</span>(<span class="stringliteral">&quot;Cannot import module &#39;${full_module}&#39;: $@&quot;</span>)
    <span class="keywordflow">if</span> $@;
<span class="preprocessor">  ## use critic</span>
<span class="preprocessor"></span>  <span class="keywordflow">return</span>;
}
</pre></div> </div> 
</div>
</div>
<a class="anchor" id="a9239ef81d9c9f494812241166c47ef56"></a><!-- doxytag: member="Bio::EnsEMBL::LookUp::cache_file" ref="a9239ef81d9c9f494812241166c47ef56" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public File Bio::EnsEMBL::LookUp::cache_file </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<pre>  Arg [1]     : File to use for local caching
  Description : Sets and retrieves the local cache file 
  Returntype  : File name if set; otherwise undef
  Status      : Stable
 </pre><div id="codesection-cache_file" class="dynheader closed" style="cursor:pointer;" onclick="return toggleVisibility(this)">  
	<img id='codesection-cache_file-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-cache_file-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-cache_file-content' class='dyncontent' style='display: none;'> 
 <div class="fragment"><pre class="fragment">sub <a class="code" href="classBio_1_1EnsEMBL_1_1LookUp.html#a9239ef81d9c9f494812241166c47ef56">cache_file</a> {
  my ($self, $cache_file) = @_;
  <span class="keywordflow">if</span> (defined $cache_file) {
    $self-&gt;{<a class="code" href="classBio_1_1EnsEMBL_1_1LookUp.html#a9239ef81d9c9f494812241166c47ef56">cache_file</a>} = $cache_file;
  }
  <span class="keywordflow">return</span> $self-&gt;{<a class="code" href="classBio_1_1EnsEMBL_1_1LookUp.html#a9239ef81d9c9f494812241166c47ef56">cache_file</a>};
}
</pre></div> </div> 
</div>
</div>
<a class="anchor" id="a1fa601916951d0c79bac76ffa6c97254"></a><!-- doxytag: member="Bio::EnsEMBL::LookUp::clear_cache" ref="a1fa601916951d0c79bac76ffa6c97254" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public Bio::EnsEMBL::LookUp::clear_cache </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Undocumented method</p>
<div id="codesection-clear_cache" class="dynheader closed" style="cursor:pointer;" onclick="return toggleVisibility(this)">  
	<img id='codesection-clear_cache-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-clear_cache-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-clear_cache-content' class='dyncontent' style='display: none;'> 
 <div class="fragment"><pre class="fragment">sub <a class="code" href="classBio_1_1EnsEMBL_1_1LookUp.html#a1fa601916951d0c79bac76ffa6c97254">clear_cache</a> {
  my ($self) = @_;
  <span class="keywordflow">if</span> (defined $self-&gt;cache_file() &amp;&amp; -e $self-&gt;cache_file()) {
    unlink $self-&gt;cache_file();
  }
  <span class="keywordflow">return</span>;
}
</pre></div> </div> 
</div>
</div>
<a class="anchor" id="ae89d6c48937917b34aa8d1beaab63e03"></a><!-- doxytag: member="Bio::EnsEMBL::LookUp::dba_to_args" ref="ae89d6c48937917b34aa8d1beaab63e03" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public Arrayref Bio::EnsEMBL::LookUp::dba_to_args </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<pre>	Description	: Dump the arguments needed for contructing a DBA
	Argument	: Bio::EnsEMBL::DBAdaptor
	Return		: Arrayref of args
 </pre><div id="codesection-dba_to_args" class="dynheader closed" style="cursor:pointer;" onclick="return toggleVisibility(this)">  
	<img id='codesection-dba_to_args-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-dba_to_args-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-dba_to_args-content' class='dyncontent' style='display: none;'> 
 <div class="fragment"><pre class="fragment">sub <a class="code" href="classBio_1_1EnsEMBL_1_1LookUp.html#ae89d6c48937917b34aa8d1beaab63e03">dba_to_args</a> {
  my ($self, $dba) = @_;
  my $dbc = $dba-&gt;dbc();
  my $args = [-species         =&gt; $dba-&gt;species(),
              -multispecies_db =&gt; $dba-&gt;is_multispecies(),
              -species_id      =&gt; $dba-&gt;species_id(),
              -group           =&gt; $dba-&gt;group(),
              -host            =&gt; $dbc-&gt;host(),
              -port            =&gt; $dbc-&gt;port(),
              -user            =&gt; $dbc-&gt;username(),
              -password        =&gt; $dbc-&gt;password(),
              -driver          =&gt; $dbc-&gt;driver(),
              -dbname          =&gt; $dbc-&gt;dbname()];
  <span class="keywordflow">return</span> $args;
}
</pre></div> </div> 
</div>
</div>
<a class="anchor" id="ae13ef532d1636a1f2d265e1299f62d41"></a><!-- doxytag: member="Bio::EnsEMBL::LookUp::get_all" ref="ae13ef532d1636a1f2d265e1299f62d41" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public Arrayref Bio::EnsEMBL::LookUp::get_all </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<pre>	Description : Return all database adaptors that have been retrieved from registry
	Argument    : None
	Exceptions  : None
	Return type : Arrayref of Bio::EnsEMBL::DBSQL::DatabaseAdaptor
 </pre><div id="codesection-get_all" class="dynheader closed" style="cursor:pointer;" onclick="return toggleVisibility(this)">  
	<img id='codesection-get_all-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-get_all-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-get_all-content' class='dyncontent' style='display: none;'> 
 <div class="fragment"><pre class="fragment">sub <a class="code" href="classBio_1_1EnsEMBL_1_1LookUp.html#ae13ef532d1636a1f2d265e1299f62d41">get_all</a> {
  my ($self) = @_;
  <span class="keywordflow">return</span> $self-&gt;{dbas};
}
</pre></div> </div> 
</div>
</div>
<a class="anchor" id="ab4784c23442d37964f2354b92e209282"></a><!-- doxytag: member="Bio::EnsEMBL::LookUp::get_all_accessions" ref="ab4784c23442d37964f2354b92e209282" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public Arrayref Bio::EnsEMBL::LookUp::get_all_accessions </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<pre>	Description : Return list of all INSDC sequence accessions (or other seq_region names) registered with the helper
	Exceptions  : None
	Return type : Arrayref of strings
 </pre><div id="codesection-get_all_accessions" class="dynheader closed" style="cursor:pointer;" onclick="return toggleVisibility(this)">  
	<img id='codesection-get_all_accessions-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-get_all_accessions-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-get_all_accessions-content' class='dyncontent' style='display: none;'> 
 <div class="fragment"><pre class="fragment">sub <a class="code" href="classBio_1_1EnsEMBL_1_1LookUp.html#ab4784c23442d37964f2354b92e209282">get_all_accessions</a> {
  my ($self) = @_;
  <span class="keywordflow">return</span> [keys(%{$self-&gt;{dbas_by_acc}})];
}
</pre></div> </div> 
</div>
</div>
<a class="anchor" id="a2f7103542090789003d5463ffcb26f94"></a><!-- doxytag: member="Bio::EnsEMBL::LookUp::get_all_assemblies" ref="a2f7103542090789003d5463ffcb26f94" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public Arrayref Bio::EnsEMBL::LookUp::get_all_assemblies </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<pre>	Description : Return list of all INSDC assembly accessions registered with the helper
	Exceptions  : None
	Return type : Arrayref of strings
 </pre><div id="codesection-get_all_assemblies" class="dynheader closed" style="cursor:pointer;" onclick="return toggleVisibility(this)">  
	<img id='codesection-get_all_assemblies-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-get_all_assemblies-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-get_all_assemblies-content' class='dyncontent' style='display: none;'> 
 <div class="fragment"><pre class="fragment">sub <a class="code" href="classBio_1_1EnsEMBL_1_1LookUp.html#a2f7103542090789003d5463ffcb26f94">get_all_assemblies</a> {
  my ($self) = @_;
  <span class="keywordflow">return</span> [keys(%{$self-&gt;{dbas_by_gc}})];
}
</pre></div> </div> 
</div>
</div>
<a class="anchor" id="af26a61fdf673ad2c50106884a4c92a56"></a><!-- doxytag: member="Bio::EnsEMBL::LookUp::get_all_by_accession" ref="af26a61fdf673ad2c50106884a4c92a56" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public Arrayref Bio::EnsEMBL::LookUp::get_all_by_accession </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<pre>	Description : Returns the database adaptor(s) that contains a seq_region with the supplied INSDC accession (or other seq_region name)
	Argument    : Int
	Exceptions  : None
	Return type : Arrayref of Bio::EnsEMBL::DBSQL::DatabaseAdaptor
 </pre><div id="codesection-get_all_by_accession" class="dynheader closed" style="cursor:pointer;" onclick="return toggleVisibility(this)">  
	<img id='codesection-get_all_by_accession-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-get_all_by_accession-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-get_all_by_accession-content' class='dyncontent' style='display: none;'> 
 <div class="fragment"><pre class="fragment">sub <a class="code" href="classBio_1_1EnsEMBL_1_1LookUp.html#af26a61fdf673ad2c50106884a4c92a56">get_all_by_accession</a> {
  my ($self, $acc) = @_;
  my $dba = $self-&gt;{dbas_by_vacc}{$acc};
  <span class="keywordflow">if</span> (!defined $dba) {
    $acc =~ s/\.[0-9]+$<span class="comment">//x;</span>
    $dba = $self-&gt;{dbas_by_acc}{$acc};
  }
  <span class="keywordflow">return</span> $dba;
}
</pre></div> </div> 
</div>
</div>
<a class="anchor" id="ac07ec8ac962153683cbaba7424cf9fa5"></a><!-- doxytag: member="Bio::EnsEMBL::LookUp::get_all_by_name_pattern" ref="ac07ec8ac962153683cbaba7424cf9fa5" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public Arrayref Bio::EnsEMBL::LookUp::get_all_by_name_pattern </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<pre>	Description : Return all database adaptors that have an alias/name that match the supplied regexp
	Argument    : String
	Exceptions  : None
	Return type : Arrayref of Bio::EnsEMBL::DBSQL::DatabaseAdaptor
 </pre><div id="codesection-get_all_by_name_pattern" class="dynheader closed" style="cursor:pointer;" onclick="return toggleVisibility(this)">  
	<img id='codesection-get_all_by_name_pattern-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-get_all_by_name_pattern-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-get_all_by_name_pattern-content' class='dyncontent' style='display: none;'> 
 <div class="fragment"><pre class="fragment">sub <a class="code" href="classBio_1_1EnsEMBL_1_1LookUp.html#ac07ec8ac962153683cbaba7424cf9fa5">get_all_by_name_pattern</a> {
  my ($self, $pattern) = @_;
  my %dbas;
  <span class="keywordflow">for</span> my $name (keys %{$self-&gt;{dbas_by_name}}) {
    <span class="keywordflow">if</span> ($name =~ m/$pattern/x) {
      <span class="keywordflow">for</span> my $dba (@{$self-&gt;{dbas_by_name}{$name}}) {
        my $key = <a class="code" href="classBio_1_1EnsEMBL_1_1LookUp.html#a47f8ace61ce2832ba8a63cacce1bad55">_dba_to_locator</a>($dba);
        $dbas{$key} = $dba;
      }
    }
  }
  <span class="keywordflow">return</span> [values(%dbas)];
}
</pre></div> </div> 
</div>
</div>
<a class="anchor" id="a794139163d42763774ebf516f06a18c0"></a><!-- doxytag: member="Bio::EnsEMBL::LookUp::get_all_by_taxon_branch" ref="a794139163d42763774ebf516f06a18c0" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public Bio::EnsEMBL::LookUp::get_all_by_taxon_branch </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Undocumented method</p>
<div id="codesection-get_all_by_taxon_branch" class="dynheader closed" style="cursor:pointer;" onclick="return toggleVisibility(this)">  
	<img id='codesection-get_all_by_taxon_branch-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-get_all_by_taxon_branch-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-get_all_by_taxon_branch-content' class='dyncontent' style='display: none;'> 
 <div class="fragment"><pre class="fragment">sub <a class="code" href="classBio_1_1EnsEMBL_1_1LookUp.html#a794139163d42763774ebf516f06a18c0">get_all_by_taxon_branch</a> {
  my ($self, $root) = @_;
  my @genomes = @{$self-&gt;get_all_by_taxon_id($root-&gt;taxon_id())};
  <span class="keywordflow">for</span> my $node (@{$root-&gt;adaptor()-&gt;fetch_descendants($root)}) {
    @genomes = (@genomes, @{$self-&gt;get_all_by_taxon_id($node-&gt;taxon_id())});
  }
  <span class="keywordflow">return</span> \@genomes;
}
</pre></div> </div> 
</div>
</div>
<a class="anchor" id="afd01023039df375d140b46f9f7be5eba"></a><!-- doxytag: member="Bio::EnsEMBL::LookUp::get_all_by_taxon_id" ref="afd01023039df375d140b46f9f7be5eba" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public Arrayref Bio::EnsEMBL::LookUp::get_all_by_taxon_id </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<pre>	Description : Returns all database adaptors that have the supplied taxonomy ID
	Argument    : Int
	Exceptions  : None
	Return type : Arrayref of Bio::EnsEMBL::DBSQL::DatabaseAdaptor
 </pre><div id="codesection-get_all_by_taxon_id" class="dynheader closed" style="cursor:pointer;" onclick="return toggleVisibility(this)">  
	<img id='codesection-get_all_by_taxon_id-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-get_all_by_taxon_id-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-get_all_by_taxon_id-content' class='dyncontent' style='display: none;'> 
 <div class="fragment"><pre class="fragment">sub <a class="code" href="classBio_1_1EnsEMBL_1_1LookUp.html#afd01023039df375d140b46f9f7be5eba">get_all_by_taxon_id</a> {
  my ($self, $id) = @_;
  <span class="keywordflow">return</span> $self-&gt;{dbas_by_taxid}{$id} || [];
}
</pre></div> </div> 
</div>
</div>
<a class="anchor" id="acefceb96f7b59e29b2d441162023796f"></a><!-- doxytag: member="Bio::EnsEMBL::LookUp::get_all_DBConnections" ref="acefceb96f7b59e29b2d441162023796f" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public Arrayref Bio::EnsEMBL::LookUp::get_all_DBConnections </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<pre>	Description : Return all database connections used by the DBAs retrieved from the registry
	Argument    : None
	Exceptions  : None
	Return type : Arrayref of Bio::EnsEMBL::DBSQL::DBConnection
 </pre><div id="codesection-get_all_DBConnections" class="dynheader closed" style="cursor:pointer;" onclick="return toggleVisibility(this)">  
	<img id='codesection-get_all_DBConnections-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-get_all_DBConnections-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-get_all_DBConnections-content' class='dyncontent' style='display: none;'> 
 <div class="fragment"><pre class="fragment">sub <a class="code" href="classBio_1_1EnsEMBL_1_1LookUp.html#acefceb96f7b59e29b2d441162023796f">get_all_DBConnections</a> {
  my ($self) = @_;
  my $adaptors = $self-&gt;registry()-&gt;get_all_DBAdaptors();
  my %dbcs;
  <span class="keywordflow">foreach</span> my $dba (@{$adaptors}) {
    my $dbc = $dba-&gt;dbc();
    $dbcs{<a class="code" href="classBio_1_1EnsEMBL_1_1LookUp.html#a8aac19015f9a8ea9e8cccca0931aa1ee">_dbc_to_locator</a>($dbc)} = $dbc;
  }
  <span class="keywordflow">return</span> [values %dbcs];
}
</pre></div> </div> 
</div>
</div>
<a class="anchor" id="ae24c855f7cb893ec184a5769d1f60d8a"></a><!-- doxytag: member="Bio::EnsEMBL::LookUp::get_all_names" ref="ae24c855f7cb893ec184a5769d1f60d8a" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public Arrayref Bio::EnsEMBL::LookUp::get_all_names </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<pre>	Description : Return list of all species names registered with the helper
	Exceptions  : None
	Return type : Arrayref of strings
 </pre><div id="codesection-get_all_names" class="dynheader closed" style="cursor:pointer;" onclick="return toggleVisibility(this)">  
	<img id='codesection-get_all_names-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-get_all_names-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-get_all_names-content' class='dyncontent' style='display: none;'> 
 <div class="fragment"><pre class="fragment">sub <a class="code" href="classBio_1_1EnsEMBL_1_1LookUp.html#ae24c855f7cb893ec184a5769d1f60d8a">get_all_names</a> {
  my ($self) = @_;
  <span class="keywordflow">return</span> [keys(%{$self-&gt;{dbas_by_name}})];
}
</pre></div> </div> 
</div>
</div>
<a class="anchor" id="a8b6d48542c2b0690b176775dcd3bba34"></a><!-- doxytag: member="Bio::EnsEMBL::LookUp::get_all_taxon_ids" ref="a8b6d48542c2b0690b176775dcd3bba34" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public Arrayref Bio::EnsEMBL::LookUp::get_all_taxon_ids </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<pre>	Description : Return list of all taxon IDs registered with the helper
	Exceptions  : None
	Return type : Arrayref of integers
 </pre><div id="codesection-get_all_taxon_ids" class="dynheader closed" style="cursor:pointer;" onclick="return toggleVisibility(this)">  
	<img id='codesection-get_all_taxon_ids-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-get_all_taxon_ids-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-get_all_taxon_ids-content' class='dyncontent' style='display: none;'> 
 <div class="fragment"><pre class="fragment">sub <a class="code" href="classBio_1_1EnsEMBL_1_1LookUp.html#a8b6d48542c2b0690b176775dcd3bba34">get_all_taxon_ids</a> {
  my ($self) = @_;
  <span class="keywordflow">return</span> [keys(%{$self-&gt;{dbas_by_taxid}})];
}
</pre></div> </div> 
</div>
</div>
<a class="anchor" id="ac7144f9a188170fc3f907b0ee4b43338"></a><!-- doxytag: member="Bio::EnsEMBL::LookUp::get_all_versioned_accessions" ref="ac7144f9a188170fc3f907b0ee4b43338" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public Arrayref Bio::EnsEMBL::LookUp::get_all_versioned_accessions </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<pre>	Description : Return list of all versioned INSDC sequence accessions (or other seq_region names) registered with the helper
	Exceptions  : None
	Return type : Arrayref of strings
 </pre><div id="codesection-get_all_versioned_accessions" class="dynheader closed" style="cursor:pointer;" onclick="return toggleVisibility(this)">  
	<img id='codesection-get_all_versioned_accessions-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-get_all_versioned_accessions-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-get_all_versioned_accessions-content' class='dyncontent' style='display: none;'> 
 <div class="fragment"><pre class="fragment">sub <a class="code" href="classBio_1_1EnsEMBL_1_1LookUp.html#ac7144f9a188170fc3f907b0ee4b43338">get_all_versioned_accessions</a> {
  my ($self) = @_;
  <span class="keywordflow">return</span> [keys(%{$self-&gt;{dbas_by_vacc}})];
}
</pre></div> </div> 
</div>
</div>
<a class="anchor" id="af23b06aee34134fb71c9602afa45a2ab"></a><!-- doxytag: member="Bio::EnsEMBL::LookUp::get_all_versioned_assemblies" ref="af23b06aee34134fb71c9602afa45a2ab" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public Arrayref Bio::EnsEMBL::LookUp::get_all_versioned_assemblies </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<pre>	Description : Return list of all versioned INSDC assembly accessions registered with the helper
	Exceptions  : None
	Return type : Arrayref of strings
 </pre><div id="codesection-get_all_versioned_assemblies" class="dynheader closed" style="cursor:pointer;" onclick="return toggleVisibility(this)">  
	<img id='codesection-get_all_versioned_assemblies-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-get_all_versioned_assemblies-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-get_all_versioned_assemblies-content' class='dyncontent' style='display: none;'> 
 <div class="fragment"><pre class="fragment">sub <a class="code" href="classBio_1_1EnsEMBL_1_1LookUp.html#af23b06aee34134fb71c9602afa45a2ab">get_all_versioned_assemblies</a> {
  my ($self) = @_;
  <span class="keywordflow">return</span> [keys(%{$self-&gt;{dbas_by_vgc}})];
}
</pre></div> </div> 
</div>
</div>
<a class="anchor" id="a72f175107ad19de05c93211b351ac88f"></a><!-- doxytag: member="Bio::EnsEMBL::LookUp::get_by_assembly_accession" ref="a72f175107ad19de05c93211b351ac88f" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public Bio::EnsEMBL::DBSQL::DatabaseAdaptor Bio::EnsEMBL::LookUp::get_by_assembly_accession </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<pre>	Description : Returns the database adaptor that contains the assembly with the supplied INSDC assembly accession
	Argument    : Int
	Exceptions  : None
	Return type : Bio::EnsEMBL::DBSQL::DatabaseAdaptor
 </pre><div id="codesection-get_by_assembly_accession" class="dynheader closed" style="cursor:pointer;" onclick="return toggleVisibility(this)">  
	<img id='codesection-get_by_assembly_accession-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-get_by_assembly_accession-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-get_by_assembly_accession-content' class='dyncontent' style='display: none;'> 
 <div class="fragment"><pre class="fragment">sub <a class="code" href="classBio_1_1EnsEMBL_1_1LookUp.html#a72f175107ad19de05c93211b351ac88f">get_by_assembly_accession</a> {
  my ($self, $acc) = @_;
  my $dba = $self-&gt;{dbas_by_vgc}{$acc};
  <span class="keywordflow">if</span> (!defined $dba) {
    $acc =~ s/\.[0-9]+$<span class="comment">//x;</span>
    $dba = $self-&gt;{dbas_by_gc}{$acc};
  }
  <span class="keywordflow">return</span> $dba;
}
</pre></div> </div> 
</div>
</div>
<a class="anchor" id="a83edc3eac26b29d90771176d977d5e6d"></a><!-- doxytag: member="Bio::EnsEMBL::LookUp::get_by_name_exact" ref="a83edc3eac26b29d90771176d977d5e6d" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public Arrayref Bio::EnsEMBL::LookUp::get_by_name_exact </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<pre>	Description : Return all database adaptors that have the supplied string as an alias/name
	Argument    : String
	Exceptions  : None
	Return type : Arrayref of Bio::EnsEMBL::DBSQL::DatabaseAdaptor
 </pre><div id="codesection-get_by_name_exact" class="dynheader closed" style="cursor:pointer;" onclick="return toggleVisibility(this)">  
	<img id='codesection-get_by_name_exact-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-get_by_name_exact-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-get_by_name_exact-content' class='dyncontent' style='display: none;'> 
 <div class="fragment"><pre class="fragment">sub <a class="code" href="classBio_1_1EnsEMBL_1_1LookUp.html#a83edc3eac26b29d90771176d977d5e6d">get_by_name_exact</a> {
  my ($self, $name) = @_;
  <span class="keywordflow">return</span> $self-&gt;{dbas_by_name}{$name};
}
</pre></div> </div> 
</div>
</div>
<a class="anchor" id="a262bdb2cc532bb9b7409fe39c1bdee42"></a><!-- doxytag: member="Bio::EnsEMBL::LookUp::load_registry_from_file" ref="a262bdb2cc532bb9b7409fe39c1bdee42" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public Bio::EnsEMBL::LookUp::load_registry_from_file </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Undocumented method</p>
<div id="codesection-load_registry_from_file" class="dynheader closed" style="cursor:pointer;" onclick="return toggleVisibility(this)">  
	<img id='codesection-load_registry_from_file-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-load_registry_from_file-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-load_registry_from_file-content' class='dyncontent' style='display: none;'> 
 <div class="fragment"><pre class="fragment">sub <a class="code" href="classBio_1_1EnsEMBL_1_1LookUp.html#a262bdb2cc532bb9b7409fe39c1bdee42">load_registry_from_file</a> {
  my ($self, $file) = @_;
  open(my $fh, <span class="charliteral">&#39;&lt;&#39;</span>, $file) or croak &quot;Cannot open file $file: $!&quot;;
  my $data = do { local $/ = undef; &lt;$fh&gt; };
  close($fh);
  <span class="keywordflow">if</span> (defined $data &amp;&amp; $data ne <span class="stringliteral">&#39;&#39;</span>) {
    $self-&gt;_load_registry_from_json($data);
  }
  <span class="keywordflow">return</span>;
}
</pre></div> </div> 
</div>
</div>
<a class="anchor" id="a9ef513c9adcfee43c557d8e365feba90"></a><!-- doxytag: member="Bio::EnsEMBL::LookUp::load_registry_from_url" ref="a9ef513c9adcfee43c557d8e365feba90" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public Bio::EnsEMBL::LookUp::load_registry_from_url </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Undocumented method</p>
<div id="codesection-load_registry_from_url" class="dynheader closed" style="cursor:pointer;" onclick="return toggleVisibility(this)">  
	<img id='codesection-load_registry_from_url-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-load_registry_from_url-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-load_registry_from_url-content' class='dyncontent' style='display: none;'> 
 <div class="fragment"><pre class="fragment">sub <a class="code" href="classBio_1_1EnsEMBL_1_1LookUp.html#a9ef513c9adcfee43c557d8e365feba90">load_registry_from_url</a> {
  my ($self, $url) = @_;
  my $json = <span class="keyword">get</span>($url);
  croak <span class="stringliteral">&quot;Could not retrieve JSON from $url: $@&quot;</span> unless defined $json;
  $self-&gt;_load_registry_from_json($json);
  <span class="keywordflow">return</span>;
}
</pre></div> </div> 
</div>
</div>
<a class="anchor" id="a004a9eccc10f89787bab3b32bb4a1366"></a><!-- doxytag: member="Bio::EnsEMBL::LookUp::new" ref="a004a9eccc10f89787bab3b32bb4a1366" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public Bio::EnsEMBL::LookUp::new </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Undocumented method</p>
<div id="codesection-new" class="dynheader closed" style="cursor:pointer;" onclick="return toggleVisibility(this)">  
	<img id='codesection-new-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-new-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-new-content' class='dyncontent' style='display: none;'> 
 <div class="fragment"><pre class="fragment">sub <span class="keyword">new</span> {
  my ($class, @args) = @_;
  my ($reg, $url, $file, $nocache, $cache_file, $clear_cache) = rearrange([qw(<a class="code" href="classBio_1_1EnsEMBL_1_1LookUp.html#ad15dae8e77ae5efcc6394e16a9256fa3">registry</a> url file no_cache <a class="code" href="classBio_1_1EnsEMBL_1_1LookUp.html#a9239ef81d9c9f494812241166c47ef56">cache_file</a> <a class="code" href="classBio_1_1EnsEMBL_1_1LookUp.html#a1fa601916951d0c79bac76ffa6c97254">clear_cache</a>)], @args);
  <span class="keywordflow">if</span> (!defined $reg) { $reg = <span class="stringliteral">&#39;Bio::EnsEMBL::Registry&#39;</span> }
  my $self = bless({}, ref($class) || $class);
  $self-&gt;{<a class="code" href="classBio_1_1EnsEMBL_1_1LookUp.html#ad15dae8e77ae5efcc6394e16a9256fa3">registry</a>}      = $reg;
  $self-&gt;{dbas_by_taxid} = {};
  $self-&gt;{dbas_by_name}  = {};
  $self-&gt;{dbas_by_acc}   = {};
  $self-&gt;{dbas_by_vacc}  = {};
  $self-&gt;{dbas_by_gc}    = {};
  $self-&gt;{dbas_by_vgc}   = {};
  $self-&gt;{dbas}          = [];
  $self-&gt;{dbc_meta}      = {};
  $cache_file ||= $default_cache_file;
  $self-&gt;cache_file($cache_file);

  <span class="keywordflow">if</span> (defined $clear_cache &amp;&amp; $clear_cache == 1) {
    $self-&gt;clear_cache();
  }
  <span class="keywordflow">if</span> (!$nocache &amp;&amp; !defined $file &amp;&amp; -e $cache_file) {
    $file = $cache_file;
  }
  <span class="keywordflow">if</span> (defined $file) {
    $self-&gt;load_registry_from_file($file);
  } elsif (defined $url) {
    $self-&gt;load_registry_from_url($url);
  } <span class="keywordflow">else</span> {
    $self-&gt;update_from_registry();
  }
  <span class="keywordflow">if</span> (!$nocache &amp;&amp; !-e $cache_file) {
    $self-&gt;write_registry_to_file($cache_file);
  }
  <span class="keywordflow">return</span> $self;
} ## end sub <span class="keyword">new</span>
</pre></div> </div> 
</div>
</div>
<a class="anchor" id="aea6c8574894d421b79f1817fdf94cfc7"></a><!-- doxytag: member="Bio::EnsEMBL::LookUp::register_all_dbs" ref="aea6c8574894d421b79f1817fdf94cfc7" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public void Bio::EnsEMBL::LookUp::register_all_dbs </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<pre>	Description : Helper method to load the registry with all multispecies core databases on the supplied server
	Argument    : Host
	Argument    : Port
	Argument    : User
	Argument    : Password
	Argument    : (optional) String with database regexp (default is _collection_core_[0-9]_eVersion_[0-9]+)
	Exceptions  : None
	Return type : None
 </pre><div id="codesection-register_all_dbs" class="dynheader closed" style="cursor:pointer;" onclick="return toggleVisibility(this)">  
	<img id='codesection-register_all_dbs-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-register_all_dbs-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-register_all_dbs-content' class='dyncontent' style='display: none;'> 
 <div class="fragment"><pre class="fragment">sub <a class="code" href="classBio_1_1EnsEMBL_1_1LookUp.html#aea6c8574894d421b79f1817fdf94cfc7">register_all_dbs</a> {
  my ($class, $host, $port, $user, $pass, $regexp) = @_;
  <span class="keywordflow">if</span> (!$regexp) {
    $regexp = <span class="stringliteral">&#39;_collection_core_[0-9]+_&#39;</span> . software_version() . <span class="stringliteral">&#39;_[0-9]+&#39;</span>;
  }
  my $str = <span class="stringliteral">&quot;DBI:mysql:host=$host;port=$port&quot;</span>;
  my $dbh = DBI-&gt;connect($str, $user, $pass);

  my @dbnames =
    grep { m/$regexp/xi }
    map  { $_-&gt;[0] } @{$dbh-&gt;selectall_arrayref(<span class="stringliteral">&#39;SHOW DATABASES&#39;</span>)};

  <span class="keywordflow">for</span> my $db (@dbnames) {
    <a class="code" href="classBio_1_1EnsEMBL_1_1LookUp.html#ae1c170846af23c6a517b60a624f98243">_register_multispecies_core</a>($host, $port, $user, $pass, $db);
  }
  <span class="keywordflow">return</span>;
}
</pre></div> </div> 
</div>
</div>
<a class="anchor" id="ad15dae8e77ae5efcc6394e16a9256fa3"></a><!-- doxytag: member="Bio::EnsEMBL::LookUp::registry" ref="ad15dae8e77ae5efcc6394e16a9256fa3" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public Registry Bio::EnsEMBL::LookUp::registry </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<pre>
  Arg [1]     : Registry module to use (default is Bio::EnsEMBL::Registry)
  Description : Sets and retrieves the Registry 
  Returntype  : Registry if set; otherwise undef
  Exceptions  : if an attempt is made to set the value more than once
  Status      : Stable
 </pre><div id="codesection-registry" class="dynheader closed" style="cursor:pointer;" onclick="return toggleVisibility(this)">  
	<img id='codesection-registry-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-registry-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-registry-content' class='dyncontent' style='display: none;'> 
 <div class="fragment"><pre class="fragment">sub <a class="code" href="classBio_1_1EnsEMBL_1_1LookUp.html#ad15dae8e77ae5efcc6394e16a9256fa3">registry</a> {
  my ($self, $registry) = @_;
  <span class="keywordflow">if</span> (defined $registry) {
    <span class="keywordflow">if</span> (exists $self-&gt;{<a class="code" href="classBio_1_1EnsEMBL_1_1LookUp.html#ad15dae8e77ae5efcc6394e16a9256fa3">registry</a>}) {
      <span class="keywordflow">throw</span>(<span class="stringliteral">&#39;Cannot reset the Registry object; already defined &#39;</span>);
    }
    $self-&gt;{<a class="code" href="classBio_1_1EnsEMBL_1_1LookUp.html#ad15dae8e77ae5efcc6394e16a9256fa3">registry</a>} = $registry;
    $self-&gt;update_from_registry();
  }
  <span class="keywordflow">return</span> $self-&gt;{<a class="code" href="classBio_1_1EnsEMBL_1_1LookUp.html#ad15dae8e77ae5efcc6394e16a9256fa3">registry</a>};
}
</pre></div> </div> 
</div>
</div>
<a class="anchor" id="aaa0a597bbd7d76c955cd1308564f27b4"></a><!-- doxytag: member="Bio::EnsEMBL::LookUp::update_from_registry" ref="aaa0a597bbd7d76c955cd1308564f27b4" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public Bio::EnsEMBL::LookUp::update_from_registry </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<pre>	Description : Update internal hashes of database adaptors by name/taxids from the registry. Invoke when registry has been updated independently.
	Exceptions  : None
 </pre><div id="codesection-update_from_registry" class="dynheader closed" style="cursor:pointer;" onclick="return toggleVisibility(this)">  
	<img id='codesection-update_from_registry-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-update_from_registry-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-update_from_registry-content' class='dyncontent' style='display: none;'> 
 <div class="fragment"><pre class="fragment">sub <a class="code" href="classBio_1_1EnsEMBL_1_1LookUp.html#aaa0a597bbd7d76c955cd1308564f27b4">update_from_registry</a> {
  my ($self) = @_;
  $self-&gt;_intern_db_connections();
  <span class="keywordflow">for</span> my $dba (@{$self-&gt;registry()-&gt;get_all_DBAdaptors(-group =&gt; <span class="stringliteral">&#39;core&#39;</span>)}) {
    $self-&gt;_hash_dba($dba);
  }
  <span class="keywordflow">return</span>;
}
</pre></div> </div> 
</div>
</div>
<a class="anchor" id="af9177536cfa09ec822b5cc44b4f1064d"></a><!-- doxytag: member="Bio::EnsEMBL::LookUp::write_registry_to_file" ref="af9177536cfa09ec822b5cc44b4f1064d" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public void Bio::EnsEMBL::LookUp::write_registry_to_file </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<pre>	Description	: Write the contents of the registry and species lists to a JSON file
	Argument	: File name
	Return		: None
 </pre><div id="codesection-write_registry_to_file" class="dynheader closed" style="cursor:pointer;" onclick="return toggleVisibility(this)">  
	<img id='codesection-write_registry_to_file-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-write_registry_to_file-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-write_registry_to_file-content' class='dyncontent' style='display: none;'> 
 <div class="fragment"><pre class="fragment">sub <a class="code" href="classBio_1_1EnsEMBL_1_1LookUp.html#af9177536cfa09ec822b5cc44b4f1064d">write_registry_to_file</a> {
  my ($self, $file) = @_;
  my $json = $self-&gt;_registry_to_json();
  <span class="keywordflow">if</span> ($json) {
    open(my $fh, <span class="charliteral">&#39;&gt;&#39;</span>, $file)
      || croak <span class="stringliteral">&quot;Cannot open &#39;${file}&#39; for writing: $!&quot;</span>;
    print $fh $json;
    close($fh);
  }
  <span class="keywordflow">return</span>;
}
</pre></div> </div> 
</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>/homes/nickl/dev/bacteria_new_9310/ensemblgenomes-api/modules/Bio/EnsEMBL/<a class="el" href="LookUp_8pm_source.html">LookUp.pm</a></li>
</ul>
</div>
</div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="namespaceBio.html">Bio</a>      </li>
      <li class="navelem"><a class="el" href="namespaceBio_1_1EnsEMBL.html">EnsEMBL</a>      </li>
      <li class="navelem"><a class="el" href="classBio_1_1EnsEMBL_1_1LookUp.html">LookUp</a>      </li>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

  </div>
</body>
</html>
