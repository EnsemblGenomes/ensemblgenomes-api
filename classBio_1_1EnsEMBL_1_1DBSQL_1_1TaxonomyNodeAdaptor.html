<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.3.1"/>
<title>Ensembl Genomes API: Bio::EnsEMBL::DBSQL::TaxonomyNodeAdaptor Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Ensembl Genomes API
   </div>
   <div id="projectbrief">Auxillary Perl API for Ensembl Genomes</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.3.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Functions</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><b>Bio</b></li><li class="navelem"><b>EnsEMBL</b></li><li class="navelem"><b>DBSQL</b></li><li class="navelem"><a class="el" href="classBio_1_1EnsEMBL_1_1DBSQL_1_1TaxonomyNodeAdaptor.html">TaxonomyNodeAdaptor</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classBio_1_1EnsEMBL_1_1DBSQL_1_1TaxonomyNodeAdaptor-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">Bio::EnsEMBL::DBSQL::TaxonomyNodeAdaptor Class Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="dynheader">
Inheritance diagram for Bio::EnsEMBL::DBSQL::TaxonomyNodeAdaptor:</div>
<div class="dyncontent">
 <div class="center">
  <img src="classBio_1_1EnsEMBL_1_1DBSQL_1_1TaxonomyNodeAdaptor.png" usemap="#Bio::EnsEMBL::DBSQL::TaxonomyNodeAdaptor_map" alt=""/>
  <map id="Bio::EnsEMBL::DBSQL::TaxonomyNodeAdaptor_map" name="Bio::EnsEMBL::DBSQL::TaxonomyNodeAdaptor_map">
</map>
 </div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a8f07fa12d6dfa71850bdfbc28cb07e2d"><td class="memItemLeft" align="right" valign="top">public <br class="typebreak"/>
<a class="el" href="classBio_1_1EnsEMBL_1_1DBSQL_1_1TaxonomyNodeAdaptor.html">Bio::EnsEMBL::DBSQL::TaxonomyNodeAdaptor</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBio_1_1EnsEMBL_1_1DBSQL_1_1TaxonomyNodeAdaptor.html#a8f07fa12d6dfa71850bdfbc28cb07e2d">new_public</a> ()</td></tr>
<tr class="separator:a8f07fa12d6dfa71850bdfbc28cb07e2d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a928c8d80cd69b686228238604f2ebf52"><td class="memItemLeft" align="right" valign="top">public&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBio_1_1EnsEMBL_1_1DBSQL_1_1TaxonomyNodeAdaptor.html#a928c8d80cd69b686228238604f2ebf52">helper</a> ()</td></tr>
<tr class="separator:a928c8d80cd69b686228238604f2ebf52"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a143bb1730451f74d6742661bbd989775"><td class="memItemLeft" align="right" valign="top">public&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBio_1_1EnsEMBL_1_1DBSQL_1_1TaxonomyNodeAdaptor.html#a143bb1730451f74d6742661bbd989775">mapper</a> ()</td></tr>
<tr class="separator:a143bb1730451f74d6742661bbd989775"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0b5c7cbb3d249793ce0c3eae5baa41b4"><td class="memItemLeft" align="right" valign="top">public <a class="el" href="classBio_1_1EnsEMBL_1_1TaxonomyNode.html">Bio::EnsEMBL::TaxonomyNode</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBio_1_1EnsEMBL_1_1DBSQL_1_1TaxonomyNodeAdaptor.html#a0b5c7cbb3d249793ce0c3eae5baa41b4">fetch_by_coredbadaptor</a> ()</td></tr>
<tr class="separator:a0b5c7cbb3d249793ce0c3eae5baa41b4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8d27def74c4f8035c995f7400000fa28"><td class="memItemLeft" align="right" valign="top">public Arrayref&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBio_1_1EnsEMBL_1_1DBSQL_1_1TaxonomyNodeAdaptor.html#a8d27def74c4f8035c995f7400000fa28">fetch_by_coredbadaptors</a> ()</td></tr>
<tr class="separator:a8d27def74c4f8035c995f7400000fa28"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a146f983269d80d82d56f12024b8df6a1"><td class="memItemLeft" align="right" valign="top">public <a class="el" href="classBio_1_1EnsEMBL_1_1TaxonomyNode.html">Bio::EnsEMBL::TaxonomyNode</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBio_1_1EnsEMBL_1_1DBSQL_1_1TaxonomyNodeAdaptor.html#a146f983269d80d82d56f12024b8df6a1">fetch_by_taxon_id</a> ()</td></tr>
<tr class="separator:a146f983269d80d82d56f12024b8df6a1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a364b98bccc677236aa399c54af34ac77"><td class="memItemLeft" align="right" valign="top">public <a class="el" href="classBio_1_1EnsEMBL_1_1TaxonomyNode.html">Bio::EnsEMBL::TaxonomyNode</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBio_1_1EnsEMBL_1_1DBSQL_1_1TaxonomyNodeAdaptor.html#a364b98bccc677236aa399c54af34ac77">fetch_by_taxon_name</a> ()</td></tr>
<tr class="separator:a364b98bccc677236aa399c54af34ac77"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6498525eec319e5409bf467f85b10925"><td class="memItemLeft" align="right" valign="top">public Arrayref&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBio_1_1EnsEMBL_1_1DBSQL_1_1TaxonomyNodeAdaptor.html#a6498525eec319e5409bf467f85b10925">fetch_all_by_taxon_ids</a> ()</td></tr>
<tr class="separator:a6498525eec319e5409bf467f85b10925"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af1052de92e3deaab5011405e31b94878"><td class="memItemLeft" align="right" valign="top">public Arrayref&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBio_1_1EnsEMBL_1_1DBSQL_1_1TaxonomyNodeAdaptor.html#af1052de92e3deaab5011405e31b94878">fetch_all_by_rank</a> ()</td></tr>
<tr class="separator:af1052de92e3deaab5011405e31b94878"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a847575dc0147e7f36b19fcf71250c6f7"><td class="memItemLeft" align="right" valign="top">public Arrayref&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBio_1_1EnsEMBL_1_1DBSQL_1_1TaxonomyNodeAdaptor.html#a847575dc0147e7f36b19fcf71250c6f7">fetch_all_by_name</a> ()</td></tr>
<tr class="separator:a847575dc0147e7f36b19fcf71250c6f7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2307ee0f9c8cbe32b60f20e27454199d"><td class="memItemLeft" align="right" valign="top">public Arrayref&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBio_1_1EnsEMBL_1_1DBSQL_1_1TaxonomyNodeAdaptor.html#a2307ee0f9c8cbe32b60f20e27454199d">fetch_all_by_name_and_class</a> ()</td></tr>
<tr class="separator:a2307ee0f9c8cbe32b60f20e27454199d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3634784808148457e7768d9ac23ac51d"><td class="memItemLeft" align="right" valign="top">public Arrayref&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBio_1_1EnsEMBL_1_1DBSQL_1_1TaxonomyNodeAdaptor.html#a3634784808148457e7768d9ac23ac51d">fetch_all_by_name_and_rank</a> ()</td></tr>
<tr class="separator:a3634784808148457e7768d9ac23ac51d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a865809d8ad7f9bac8c618ca44ecdb7ac"><td class="memItemLeft" align="right" valign="top">public <a class="el" href="classBio_1_1EnsEMBL_1_1TaxonomyNode.html">Bio::EnsEMBL::TaxonomyNode</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBio_1_1EnsEMBL_1_1DBSQL_1_1TaxonomyNodeAdaptor.html#a865809d8ad7f9bac8c618ca44ecdb7ac">fetch_parent</a> ()</td></tr>
<tr class="separator:a865809d8ad7f9bac8c618ca44ecdb7ac"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acb7cae1f0233c91c5fb7cfdc4d66d952"><td class="memItemLeft" align="right" valign="top">public <a class="el" href="classBio_1_1EnsEMBL_1_1TaxonomyNode.html">Bio::EnsEMBL::TaxonomyNode</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBio_1_1EnsEMBL_1_1DBSQL_1_1TaxonomyNodeAdaptor.html#acb7cae1f0233c91c5fb7cfdc4d66d952">fetch_root</a> ()</td></tr>
<tr class="separator:acb7cae1f0233c91c5fb7cfdc4d66d952"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab0fd45baeccfc5ff5b2b4af3f52e699e"><td class="memItemLeft" align="right" valign="top">public Arrayref&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBio_1_1EnsEMBL_1_1DBSQL_1_1TaxonomyNodeAdaptor.html#ab0fd45baeccfc5ff5b2b4af3f52e699e">fetch_children</a> ()</td></tr>
<tr class="separator:ab0fd45baeccfc5ff5b2b4af3f52e699e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4389669d002e2ca6caf932827b800aaf"><td class="memItemLeft" align="right" valign="top">public&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBio_1_1EnsEMBL_1_1DBSQL_1_1TaxonomyNodeAdaptor.html#a4389669d002e2ca6caf932827b800aaf">fetch_all_common_ancestors</a> ()</td></tr>
<tr class="separator:a4389669d002e2ca6caf932827b800aaf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af7d2f5acd1d17eace8d94a48a0782790"><td class="memItemLeft" align="right" valign="top">public&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBio_1_1EnsEMBL_1_1DBSQL_1_1TaxonomyNodeAdaptor.html#af7d2f5acd1d17eace8d94a48a0782790">fetch_common_ancestor</a> ()</td></tr>
<tr class="separator:af7d2f5acd1d17eace8d94a48a0782790"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0147113a768c4679c7c3ddc9a89cd69d"><td class="memItemLeft" align="right" valign="top">public&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBio_1_1EnsEMBL_1_1DBSQL_1_1TaxonomyNodeAdaptor.html#a0147113a768c4679c7c3ddc9a89cd69d">fetch_ancestor_by_rank</a> ()</td></tr>
<tr class="separator:a0147113a768c4679c7c3ddc9a89cd69d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7e52066975c92f13a1c521f9ab541d61"><td class="memItemLeft" align="right" valign="top">protected&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBio_1_1EnsEMBL_1_1DBSQL_1_1TaxonomyNodeAdaptor.html#a7e52066975c92f13a1c521f9ab541d61">_get_node</a> ()</td></tr>
<tr class="separator:a7e52066975c92f13a1c521f9ab541d61"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a74bc6bc12ca4f3f296087f2b85713855"><td class="memItemLeft" align="right" valign="top">protected&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBio_1_1EnsEMBL_1_1DBSQL_1_1TaxonomyNodeAdaptor.html#a74bc6bc12ca4f3f296087f2b85713855">_get_node_id</a> ()</td></tr>
<tr class="separator:a74bc6bc12ca4f3f296087f2b85713855"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae75c96b99f505385c7729d1090785ee3"><td class="memItemLeft" align="right" valign="top">public Arrayref&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBio_1_1EnsEMBL_1_1DBSQL_1_1TaxonomyNodeAdaptor.html#ae75c96b99f505385c7729d1090785ee3">fetch_descendants</a> ()</td></tr>
<tr class="separator:ae75c96b99f505385c7729d1090785ee3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adfff44f58da57d1fbb0d9d466c32dbba"><td class="memItemLeft" align="right" valign="top">public Arrayref&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBio_1_1EnsEMBL_1_1DBSQL_1_1TaxonomyNodeAdaptor.html#adfff44f58da57d1fbb0d9d466c32dbba">fetch_descendant_ids</a> ()</td></tr>
<tr class="separator:adfff44f58da57d1fbb0d9d466c32dbba"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6f018c4e7c29a6dc11feb35f9a24c336"><td class="memItemLeft" align="right" valign="top">public Arrayref&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBio_1_1EnsEMBL_1_1DBSQL_1_1TaxonomyNodeAdaptor.html#a6f018c4e7c29a6dc11feb35f9a24c336">fetch_leaf_nodes</a> ()</td></tr>
<tr class="separator:a6f018c4e7c29a6dc11feb35f9a24c336"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac07a1294368c2815845978ffa18db9b5"><td class="memItemLeft" align="right" valign="top">public Arrayref&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBio_1_1EnsEMBL_1_1DBSQL_1_1TaxonomyNodeAdaptor.html#ac07a1294368c2815845978ffa18db9b5">fetch_ancestors</a> ()</td></tr>
<tr class="separator:ac07a1294368c2815845978ffa18db9b5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5f444369045685840c32e06cdf0ccaae"><td class="memItemLeft" align="right" valign="top">public Boolean&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBio_1_1EnsEMBL_1_1DBSQL_1_1TaxonomyNodeAdaptor.html#a5f444369045685840c32e06cdf0ccaae">node_has_ancestor</a> ()</td></tr>
<tr class="separator:a5f444369045685840c32e06cdf0ccaae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9b636d26c4e31842a9a023780a8990b9"><td class="memItemLeft" align="right" valign="top">public Arrayref&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBio_1_1EnsEMBL_1_1DBSQL_1_1TaxonomyNodeAdaptor.html#a9b636d26c4e31842a9a023780a8990b9">fetch_descendants_offset</a> ()</td></tr>
<tr class="separator:a9b636d26c4e31842a9a023780a8990b9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acdad70d2aaa7bb3a76d297560ec08958"><td class="memItemLeft" align="right" valign="top">public void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBio_1_1EnsEMBL_1_1DBSQL_1_1TaxonomyNodeAdaptor.html#acdad70d2aaa7bb3a76d297560ec08958">add_descendants</a> ()</td></tr>
<tr class="separator:acdad70d2aaa7bb3a76d297560ec08958"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac439f27cfa56d62951ee761e80bf17db"><td class="memItemLeft" align="right" valign="top">public <a class="el" href="classBio_1_1EnsEMBL_1_1TaxonomyNode.html">Bio::EnsEMBL::TaxonomyNode</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBio_1_1EnsEMBL_1_1DBSQL_1_1TaxonomyNodeAdaptor.html#ac439f27cfa56d62951ee761e80bf17db">associate_nodes</a> ()</td></tr>
<tr class="separator:ac439f27cfa56d62951ee761e80bf17db"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a02d590171e2d14da87085d57116d751f"><td class="memItemLeft" align="right" valign="top">public void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBio_1_1EnsEMBL_1_1DBSQL_1_1TaxonomyNodeAdaptor.html#a02d590171e2d14da87085d57116d751f">set_num_descendants</a> ()</td></tr>
<tr class="separator:a02d590171e2d14da87085d57116d751f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2faf0ff0de062dc2031575f4858d0d4d"><td class="memItemLeft" align="right" valign="top">protected <br class="typebreak"/>
<a class="el" href="classBio_1_1EnsEMBL_1_1TaxonomyNode.html">Bio::EnsEMBL::TaxonomyNode</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBio_1_1EnsEMBL_1_1DBSQL_1_1TaxonomyNodeAdaptor.html#a2faf0ff0de062dc2031575f4858d0d4d">_get_parent_by_index</a> ()</td></tr>
<tr class="separator:a2faf0ff0de062dc2031575f4858d0d4d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa22e5e1ec651d855006177c93ef29234"><td class="memItemLeft" align="right" valign="top">public void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBio_1_1EnsEMBL_1_1DBSQL_1_1TaxonomyNodeAdaptor.html#aa22e5e1ec651d855006177c93ef29234">build_pruned_tree</a> ()</td></tr>
<tr class="separator:aa22e5e1ec651d855006177c93ef29234"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a54ce8ea2ca13ac47d176599c5447303d"><td class="memItemLeft" align="right" valign="top">public void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBio_1_1EnsEMBL_1_1DBSQL_1_1TaxonomyNodeAdaptor.html#a54ce8ea2ca13ac47d176599c5447303d">collapse_tree</a> ()</td></tr>
<tr class="separator:a54ce8ea2ca13ac47d176599c5447303d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa17b7ee274efeb5b2fad803a3688a148"><td class="memItemLeft" align="right" valign="top">public Int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBio_1_1EnsEMBL_1_1DBSQL_1_1TaxonomyNodeAdaptor.html#aa17b7ee274efeb5b2fad803a3688a148">distance_between_nodes</a> ()</td></tr>
<tr class="separator:aa17b7ee274efeb5b2fad803a3688a148"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a72b0b72d7d1e7ce3ccf0720010c56d03"><td class="memItemLeft" align="right" valign="top">protected Arrayref&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBio_1_1EnsEMBL_1_1DBSQL_1_1TaxonomyNodeAdaptor.html#a72b0b72d7d1e7ce3ccf0720010c56d03">_build_node_array</a> ()</td></tr>
<tr class="separator:a72b0b72d7d1e7ce3ccf0720010c56d03"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2fc8c7b942a628936313d5e03e4a1e4b"><td class="memItemLeft" align="right" valign="top">protected Arrayref&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBio_1_1EnsEMBL_1_1DBSQL_1_1TaxonomyNodeAdaptor.html#a2fc8c7b942a628936313d5e03e4a1e4b">_restrict_set</a> ()</td></tr>
<tr class="separator:a2fc8c7b942a628936313d5e03e4a1e4b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a91f40539b36cd65240cc07c074ff2310"><td class="memItemLeft" align="right" valign="top">protected Arrayref&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBio_1_1EnsEMBL_1_1DBSQL_1_1TaxonomyNodeAdaptor.html#a91f40539b36cd65240cc07c074ff2310">_first_element</a> ()</td></tr>
<tr class="separator:a91f40539b36cd65240cc07c074ff2310"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><h1><a class="anchor" id="Synopsis"></a>
Synopsis</h1>
<div class="fragment"><div class="line"><span class="preprocessor">#create an adaptor (Registry cannot be used currently)</span></div>
<div class="line"><span class="preprocessor"></span>my $tax_dba =  <a class="code" href="classBio_1_1EnsEMBL_1_1DBSQL_1_1TaxonomyDBAdaptor.html">Bio::EnsEMBL::DBSQL::TaxonomyDBAdaptor</a>-&gt;new(</div>
<div class="line">                                      -user   =&gt; $tax_user,</div>
<div class="line">                                      -pass   =&gt; $tax_pass,</div>
<div class="line">                                      -dbname =&gt; $tax_db,</div>
<div class="line">                                      -host   =&gt; $tax_host,</div>
<div class="line">                                      -port   =&gt; $tax_port);                                      </div>
<div class="line">my $node_adaptor = $tax_dba-&gt;get_TaxonomyNodeAdaptor();</div>
<div class="line"><span class="preprocessor"># get a node for an ID</span></div>
<div class="line"><span class="preprocessor"></span>my $node = $node_adaptor-&gt;fetch_by_taxon_id(511145);</div>
<div class="line"><span class="preprocessor"># print some info</span></div>
<div class="line"><span class="preprocessor"></span>printf <span class="stringliteral">&quot;Node %d is %s %s\n&quot;</span>,$node-&gt;taxon_id(),$node-&gt;rank(),$node-&gt;names()-&gt;{<span class="stringliteral">&#39;scientific name&#39;</span>}-&gt;[0];</div>
<div class="line"><span class="preprocessor"># Finding ancestors</span></div>
<div class="line"><span class="preprocessor"></span>my @lineage = @{$node_adaptor-&gt;fetch_ancestors($node)};</div>
<div class="line"><span class="keywordflow">for</span> my $node (@lineage) {</div>
<div class="line">    printf <span class="stringliteral">&quot;Node %d is %s %s\n&quot;</span>,$node-&gt;taxon_id(),$node-&gt;rank(),$node-&gt;names()-&gt;{<span class="stringliteral">&#39;scientific name&#39;</span>}-&gt;[0];</div>
<div class="line">}</div>
</div><!-- fragment --> <h1><a class="anchor" id="Description"></a>
Description</h1>
 <pre>
A database adaptor allowing access to the nodes of the NCBI taxonomy. It is currently managed independently of the registry:
my $tax_dba =  Bio::EnsEMBL::DBSQL::TaxonomyDBAdaptor->new(
                                      -user   => $tax_user,
                                      -pass   => $tax_pass,
                                      -dbname => $tax_db,
                                      -host   => $tax_host,
                                      -port   => $tax_port);
                                                                          
my $node_adaptor = $tax_dba->get_TaxonomyNodeAdaptor();
# or alternatively
my $node_adaptor = Bio::EnsEMBL::DBSQL::TaxonomyNodeAdaptor->new($tax_dba);

The TaxonomyNodeAdaptor handles TaxonomyNode objects, which represent nodes in the NCBI taxonomy

There are two main practical uses for the :
1. Accessing the taxonomy database to find species of interest and to then find those within the ENA databases e.g. to find all 
descendants of the node representing Escherichia coli:
    my $node = $node_adaptor->fetch_by_taxon_id(562);
    for my $child (\@{$node_adaptor->fetch_descendants($node)}) {
        my $dbas = $helper->get_all_by_taxon_id($node->taxon_id())
        if(defined $dbas) {
            for my $dba (\@{$dbas}) {
                # do something with the $dba
            }
        }
    }

2. Placing ENA species into a taxonomic hierarchy and manipulating that hierarchy (mainly for use in the web interface)
    # iterate over all dbas from a registry or ENARegistryHelper
    for my $dba (\@{$helper->get_all_DBAdaptors()}) {
        my $node = $node_adaptor->fetch_by_coredbadaptor($dba);
        # add the node to a hash set of leaf nodes if not already there
        if ( $leaf_nodes->{ $node->taxon_id() } ) {
            $node = $leaf_nodes->{ $node->taxon_id() };
        } else {
            $leaf_nodes->{ $node->taxon_id() } = $node;
        }
        # attach the DBA to the node
        push \@{$node->dba()}, $dba;
    }
    my \@leaf_nodes = values(%$leaf_nodes);
    # get the root of the tree
    my $root = $node_adaptor->fetch_by_taxon_id(1);
    # get rid of all branches of the taxonomy that don't involve a node from the dba
    $node_adaptor->build_pruned_tree( $root, \\@leaf_nodes );
    # collapse 
    $node_adaptor->collapse_tree($root);
    
</pre> </div><h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a72b0b72d7d1e7ce3ccf0720010c56d03"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">protected Arrayref Bio::EnsEMBL::DBSQL::TaxonomyNodeAdaptor::_build_node_array </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre>Description: Build a sparse array based on left/right indices of a set of nodes to allow speedy lookup
Argument: Arrayref of <a class="el" href="classBio_1_1EnsEMBL_1_1TaxonomyNode.html">Bio::EnsEMBL::TaxonomyNode</a>
Return type: Arrayref containing arrayref of 1/0 by left/right, min left index, max right index
 </pre><div id="codesection-_build_node_array" class="dynheader closed" style="cursor:pointer;" onclick="return toggleVisibility(this)">  
    <img id='codesection-_build_node_array-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-_build_node_array-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-_build_node_array-content' class='dyncontent' style='display: none;'> 
 <div class="fragment"><div class="line">sub <a class="code" href="classBio_1_1EnsEMBL_1_1DBSQL_1_1TaxonomyNodeAdaptor.html#a72b0b72d7d1e7ce3ccf0720010c56d03">_build_node_array</a> {</div>
<div class="line">  my ($self, $leaf_nodes) = @_;</div>
<div class="line">  my $array;</div>
<div class="line">  my $lmin = 0;</div>
<div class="line">  my $rmax = 0;</div>
<div class="line">  <span class="keywordflow">for</span> my $node (@$leaf_nodes) {</div>
<div class="line">    <span class="keywordflow">if</span> (!$node-&gt;{left_index} || !$node-&gt;{right_index}) {</div>
<div class="line">      print Dumper($node);</div>
<div class="line">      <span class="keywordflow">throw</span> <span class="stringliteral">&quot;Indices not set for &quot;</span> . $node-&gt;to_string();</div>
<div class="line">    }</div>
<div class="line">    $array-&gt;[$node-&gt;{left_index}]  = 1;</div>
<div class="line">    $array-&gt;[$node-&gt;{right_index}] = 1;</div>
<div class="line">    $lmin =</div>
<div class="line">      ($lmin == 0 || $node-&gt;{left_index} &lt; $lmin) ?</div>
<div class="line">      $node-&gt;{left_index} :</div>
<div class="line">      $lmin;</div>
<div class="line">    $rmax =</div>
<div class="line">      ($rmax &lt; $node-&gt;{right_index}) ? $node-&gt;{right_index} : $rmax;</div>
<div class="line">  }</div>
<div class="line">  <span class="keywordflow">return</span> [$array, $lmin, $rmax];</div>
<div class="line">}</div>
</div><!-- fragment --> </div> 
</div>
</div>
<a class="anchor" id="a91f40539b36cd65240cc07c074ff2310"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">protected Arrayref Bio::EnsEMBL::DBSQL::TaxonomyNodeAdaptor::_first_element </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre>  Arg       : arrayref
  Description: Utility method to return the first element in a list, undef if empty
  Returntype : arrayref element
  Exceptions : none
  Caller     : internal
  Status     : Stable
 </pre><div id="codesection-_first_element" class="dynheader closed" style="cursor:pointer;" onclick="return toggleVisibility(this)">  
    <img id='codesection-_first_element-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-_first_element-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-_first_element-content' class='dyncontent' style='display: none;'> 
 <div class="fragment"><div class="line">sub <a class="code" href="classBio_1_1EnsEMBL_1_1DBSQL_1_1TaxonomyNodeAdaptor.html#a91f40539b36cd65240cc07c074ff2310">_first_element</a> {</div>
<div class="line">  my ($arr) = @_;</div>
<div class="line">  <span class="keywordflow">if</span> (defined $arr &amp;&amp; scalar(@$arr) &gt; 0) {</div>
<div class="line">    <span class="keywordflow">return</span> $arr-&gt;[0];</div>
<div class="line">  }</div>
<div class="line">  <span class="keywordflow">else</span> {</div>
<div class="line">    <span class="keywordflow">return</span> undef;</div>
<div class="line">  }</div>
<div class="line">}</div>
</div><!-- fragment --> </div> 
</div>
</div>
<a class="anchor" id="a7e52066975c92f13a1c521f9ab541d61"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">protected Bio::EnsEMBL::DBSQL::TaxonomyNodeAdaptor::_get_node </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Undocumented method</p>
<div id="codesection-_get_node" class="dynheader closed" style="cursor:pointer;" onclick="return toggleVisibility(this)">  
    <img id='codesection-_get_node-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-_get_node-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-_get_node-content' class='dyncontent' style='display: none;'> 
 <div class="fragment"><div class="line">sub <a class="code" href="classBio_1_1EnsEMBL_1_1DBSQL_1_1TaxonomyNodeAdaptor.html#a7e52066975c92f13a1c521f9ab541d61">_get_node</a> {</div>
<div class="line">  my ($self, $node) = @_;</div>
<div class="line">  <span class="keywordflow">if</span> (ref($node) eq <span class="stringliteral">&#39;Bio::EnsEMBL::TaxonomyNode&#39;</span>) {</div>
<div class="line">    <span class="keywordflow">return</span> $node;</div>
<div class="line">  }</div>
<div class="line">  <span class="keywordflow">else</span> {</div>
<div class="line">    <span class="keywordflow">return</span> $self-&gt;fetch_by_taxon_id($node);</div>
<div class="line">  }</div>
<div class="line">}</div>
</div><!-- fragment --> </div> 
</div>
</div>
<a class="anchor" id="a74bc6bc12ca4f3f296087f2b85713855"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">protected Bio::EnsEMBL::DBSQL::TaxonomyNodeAdaptor::_get_node_id </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Undocumented method</p>
<div id="codesection-_get_node_id" class="dynheader closed" style="cursor:pointer;" onclick="return toggleVisibility(this)">  
    <img id='codesection-_get_node_id-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-_get_node_id-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-_get_node_id-content' class='dyncontent' style='display: none;'> 
 <div class="fragment"><div class="line">sub <a class="code" href="classBio_1_1EnsEMBL_1_1DBSQL_1_1TaxonomyNodeAdaptor.html#a74bc6bc12ca4f3f296087f2b85713855">_get_node_id</a> {</div>
<div class="line">  my ($node) = @_;</div>
<div class="line">  my $node_id;</div>
<div class="line">  <span class="keywordflow">if</span> (ref($node) eq <span class="stringliteral">&#39;Bio::EnsEMBL::TaxonomyNode&#39;</span>) {</div>
<div class="line">    <span class="keywordflow">return</span> $node-&gt;taxon_id();</div>
<div class="line">  }</div>
<div class="line">  <span class="keywordflow">else</span> {</div>
<div class="line">    <span class="keywordflow">return</span> $node;</div>
<div class="line">  }</div>
<div class="line">}</div>
</div><!-- fragment --> </div> 
</div>
</div>
<a class="anchor" id="a2faf0ff0de062dc2031575f4858d0d4d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">protected <a class="el" href="classBio_1_1EnsEMBL_1_1TaxonomyNode.html">Bio::EnsEMBL::TaxonomyNode</a> Bio::EnsEMBL::DBSQL::TaxonomyNodeAdaptor::_get_parent_by_index </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre>Description: Find the parent of a node, initially based on left/right index to find direct parent, and then by recursion through parents to work back to the closest common ancestor.
Argument: Current node
Argument: Prospective parent
Return type: <a class="el" href="classBio_1_1EnsEMBL_1_1TaxonomyNode.html">Bio::EnsEMBL::TaxonomyNode</a>
 </pre><div id="codesection-_get_parent_by_index" class="dynheader closed" style="cursor:pointer;" onclick="return toggleVisibility(this)">  
    <img id='codesection-_get_parent_by_index-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-_get_parent_by_index-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-_get_parent_by_index-content' class='dyncontent' style='display: none;'> 
 <div class="fragment"><div class="line">sub <a class="code" href="classBio_1_1EnsEMBL_1_1DBSQL_1_1TaxonomyNodeAdaptor.html#a2faf0ff0de062dc2031575f4858d0d4d">_get_parent_by_index</a> {</div>
<div class="line">  my ($self, $leaf_node, $node) = @_;</div>
<div class="line">  my $parent;</div>
<div class="line">  <span class="keywordflow">if</span> ($node-&gt;{left_index} &lt; $leaf_node-&gt;{left_index} &amp;&amp;</div>
<div class="line">      $node-&gt;{right_index} &gt; $leaf_node-&gt;{right_index})</div>
<div class="line">  {</div>
<div class="line">    $parent = $node;</div>
<div class="line">  }</div>
<div class="line">  elsif (defined $node-&gt;{parent}) {</div>
<div class="line">    $parent = $self-&gt;_get_parent_by_index($leaf_node, $node-&gt;{parent});</div>
<div class="line">  }</div>
<div class="line">  <span class="keywordflow">return</span> $parent;</div>
<div class="line">}</div>
</div><!-- fragment --> </div> 
</div>
</div>
<a class="anchor" id="a2fc8c7b942a628936313d5e03e4a1e4b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">protected Arrayref Bio::EnsEMBL::DBSQL::TaxonomyNodeAdaptor::_restrict_set </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre>Description: Restrict the input set to those needed to build a tree including all members of the leaf set
Argument: Arrayref of <a class="el" href="classBio_1_1EnsEMBL_1_1TaxonomyNode.html">Bio::EnsEMBL::TaxonomyNode</a> (leaf set)
Argument: Arrayref of <a class="el" href="classBio_1_1EnsEMBL_1_1TaxonomyNode.html">Bio::EnsEMBL::TaxonomyNode</a> (input set)
Return: Arrayref of <a class="el" href="classBio_1_1EnsEMBL_1_1TaxonomyNode.html">Bio::EnsEMBL::TaxonomyNode</a>
 </pre><div id="codesection-_restrict_set" class="dynheader closed" style="cursor:pointer;" onclick="return toggleVisibility(this)">  
    <img id='codesection-_restrict_set-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-_restrict_set-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-_restrict_set-content' class='dyncontent' style='display: none;'> 
 <div class="fragment"><div class="line">sub <a class="code" href="classBio_1_1EnsEMBL_1_1DBSQL_1_1TaxonomyNodeAdaptor.html#a2fc8c7b942a628936313d5e03e4a1e4b">_restrict_set</a> {</div>
<div class="line">  my ($self, $leaf_nodes, $input_set) = @_;</div>
<div class="line"><span class="preprocessor">  # build sparse array</span></div>
<div class="line"><span class="preprocessor"></span>  my ($node_array, $lmin, $rmax) =</div>
<div class="line">    @{$self-&gt;_build_node_array($leaf_nodes)};</div>
<div class="line"><span class="preprocessor">  # hash leaf nodes by taxon_id to allow replacement</span></div>
<div class="line"><span class="preprocessor"></span>  my %leaves = map { $_-&gt;taxon_id() =&gt; $_ } @$leaf_nodes;</div>
<div class="line">  my @output_set;</div>
<div class="line"><span class="preprocessor">  # iterate over everything in the min/max range</span></div>
<div class="line"><span class="preprocessor"></span>  <span class="keywordflow">for</span> my $node (</div>
<div class="line">    grep {</div>
<div class="line">      $_-&gt;{right_index} &gt;= $lmin ||</div>
<div class="line">        $_-&gt;{left_index} &lt;= $rmax</div>
<div class="line">    } @$input_set)</div>
<div class="line">  {</div>
<div class="line">    my $leaf = $leaves{$node-&gt;taxon_id()};</div>
<div class="line">    <span class="keywordflow">if</span> (defined $leaf) {</div>
<div class="line">      push @output_set, $leaf;</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">else</span> {</div>
<div class="line">      <span class="keywordflow">for</span> (my $i = $node-&gt;{left_index};</div>
<div class="line">           $i &lt;= $node-&gt;{right_index}; $i++)</div>
<div class="line">      {</div>
<div class="line">        <span class="keywordflow">if</span> ($node_array-&gt;[$i]) {</div>
<div class="line">          push @output_set, $node;</div>
<div class="line">          last;</div>
<div class="line">        }</div>
<div class="line">      }</div>
<div class="line">    }</div>
<div class="line">  }</div>
<div class="line">  <span class="keywordflow">return</span> \@output_set;</div>
<div class="line">} ## end sub <a class="code" href="classBio_1_1EnsEMBL_1_1DBSQL_1_1TaxonomyNodeAdaptor.html#a2fc8c7b942a628936313d5e03e4a1e4b">_restrict_set</a></div>
</div><!-- fragment --> </div> 
</div>
</div>
<a class="anchor" id="acdad70d2aaa7bb3a76d297560ec08958"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public void Bio::EnsEMBL::DBSQL::TaxonomyNodeAdaptor::add_descendants </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre>
Description : Fetch descendants for the supplied node and assemble into a tree
Argument    : <a class="el" href="classBio_1_1EnsEMBL_1_1TaxonomyNode.html">Bio::EnsEMBL::TaxonomyNode</a>
Return type : None
 </pre><div id="codesection-add_descendants" class="dynheader closed" style="cursor:pointer;" onclick="return toggleVisibility(this)">  
    <img id='codesection-add_descendants-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-add_descendants-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-add_descendants-content' class='dyncontent' style='display: none;'> 
 <div class="fragment"><div class="line">sub <a class="code" href="classBio_1_1EnsEMBL_1_1DBSQL_1_1TaxonomyNodeAdaptor.html#acdad70d2aaa7bb3a76d297560ec08958">add_descendants</a> {</div>
<div class="line">  my ($self, $node) = @_;</div>
<div class="line"><span class="preprocessor">  # hash nodes</span></div>
<div class="line"><span class="preprocessor"></span>  $self-&gt;associate_nodes([$node, @{$self-&gt;fetch_descendants($node)}]);</div>
<div class="line">  <span class="keywordflow">return</span>;</div>
<div class="line">}</div>
</div><!-- fragment --> </div> 
</div>
</div>
<a class="anchor" id="ac439f27cfa56d62951ee761e80bf17db"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public <a class="el" href="classBio_1_1EnsEMBL_1_1TaxonomyNode.html">Bio::EnsEMBL::TaxonomyNode</a> Bio::EnsEMBL::DBSQL::TaxonomyNodeAdaptor::associate_nodes </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre>
Description : Associate the supplied nodes into a tree based on left/right indices and return the root node
Argument    : Arrayref of <a class="el" href="classBio_1_1EnsEMBL_1_1TaxonomyNode.html">Bio::EnsEMBL::TaxonomyNode</a>
Return type : <a class="el" href="classBio_1_1EnsEMBL_1_1TaxonomyNode.html">Bio::EnsEMBL::TaxonomyNode</a>
 </pre><div id="codesection-associate_nodes" class="dynheader closed" style="cursor:pointer;" onclick="return toggleVisibility(this)">  
    <img id='codesection-associate_nodes-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-associate_nodes-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-associate_nodes-content' class='dyncontent' style='display: none;'> 
 <div class="fragment"><div class="line">sub <a class="code" href="classBio_1_1EnsEMBL_1_1DBSQL_1_1TaxonomyNodeAdaptor.html#ac439f27cfa56d62951ee761e80bf17db">associate_nodes</a> {</div>
<div class="line">  my ($self, $nodes) = @_;</div>
<div class="line"><span class="preprocessor">  # sort by left index</span></div>
<div class="line"><span class="preprocessor"></span>  my @nodes = sort { $a-&gt;{left_index} &lt;=&gt; $b-&gt;{left_index} } @$nodes;</div>
<div class="line">  my $root = $nodes[0];</div>
<div class="line">  my $last_node = undef;</div>
<div class="line"><span class="preprocessor">  # walk through them finding parents which enclose them</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">  # reset parent/child relationships</span></div>
<div class="line"><span class="preprocessor"></span>  <span class="keywordflow">for</span> my $node (@nodes) {</div>
<div class="line">    $node-&gt;{parent_id} = 0;</div>
<div class="line">    $node-&gt;{parent}    = undef;</div>
<div class="line">    $node-&gt;{children}  = [];</div>
<div class="line">    <span class="keywordflow">if</span> (defined $last_node) {</div>
<div class="line">      my $parent = $self-&gt;_get_parent_by_index($node, $last_node);</div>
<div class="line">      <span class="keywordflow">if</span> (defined $parent) {</div>
<div class="line">        $node-&gt;{parent_id} = $parent-&gt;<a class="code" href="classBio_1_1EnsEMBL_1_1TaxonomyNode.html#a5cf70ea804280b71ae85e51e211c82ab">taxon_id</a>();</div>
<div class="line">        $node-&gt;{parent}    = $parent;</div>
<div class="line">        push @{$parent-&gt;{children}}, $node;</div>
<div class="line">      }</div>
<div class="line">    }</div>
<div class="line">    $node-&gt;{root_id} = $root-&gt;taxon_id();</div>
<div class="line">    $node-&gt;{root}    = $root;</div>
<div class="line">    $last_node       = $node;</div>
<div class="line">  }</div>
<div class="line">  $self-&gt;set_num_descendants($root);</div>
<div class="line">  <span class="keywordflow">return</span> $root;</div>
<div class="line">} ## end sub <a class="code" href="classBio_1_1EnsEMBL_1_1DBSQL_1_1TaxonomyNodeAdaptor.html#ac439f27cfa56d62951ee761e80bf17db">associate_nodes</a></div>
</div><!-- fragment --> </div> 
</div>
</div>
<a class="anchor" id="aa22e5e1ec651d855006177c93ef29234"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public void Bio::EnsEMBL::DBSQL::TaxonomyNodeAdaptor::build_pruned_tree </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre>Description : Restrict supplied tree by list of key leaf nodes
Argument    : <a class="el" href="classBio_1_1EnsEMBL_1_1TaxonomyNode.html">Bio::EnsEMBL::TaxonomyNode</a>
Argument    : Array ref of <a class="el" href="classBio_1_1EnsEMBL_1_1TaxonomyNode.html">Bio::EnsEMBL::TaxonomyNode</a>
Return type : None
 </pre><div id="codesection-build_pruned_tree" class="dynheader closed" style="cursor:pointer;" onclick="return toggleVisibility(this)">  
    <img id='codesection-build_pruned_tree-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-build_pruned_tree-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-build_pruned_tree-content' class='dyncontent' style='display: none;'> 
 <div class="fragment"><div class="line">sub <a class="code" href="classBio_1_1EnsEMBL_1_1DBSQL_1_1TaxonomyNodeAdaptor.html#aa22e5e1ec651d855006177c93ef29234">build_pruned_tree</a> {</div>
<div class="line">  my ($self, $root, $leaf_nodes) = @_;</div>
<div class="line"><span class="preprocessor">  # get the test set and winnow</span></div>
<div class="line"><span class="preprocessor"></span>  my @nodes =</div>
<div class="line">    grep { $_-&gt;taxon_id() != $root-&gt;taxon_id() }</div>
<div class="line">    @{$self-&gt;_restrict_set($leaf_nodes, $self-&gt;fetch_descendants($root))</div>
<div class="line">    };</div>
<div class="line">  $self-&gt;associate_nodes([$root, @nodes]);</div>
<div class="line">  <span class="keywordflow">return</span>;</div>
<div class="line">}</div>
</div><!-- fragment --> </div> 
</div>
</div>
<a class="anchor" id="a54ce8ea2ca13ac47d176599c5447303d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public void Bio::EnsEMBL::DBSQL::TaxonomyNodeAdaptor::collapse_tree </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre>Description : Remove all nodes from tree that do not fit the required criteria. By default, these are not branch points, the root node, leaf nodes or nodes with database adaptors.
Argument    : <a class="el" href="classBio_1_1EnsEMBL_1_1TaxonomyNode.html">Bio::EnsEMBL::TaxonomyNode</a>
Argument    : Array ref of <a class="el" href="classBio_1_1EnsEMBL_1_1TaxonomyNode.html">Bio::EnsEMBL::TaxonomyNode</a>
Argument    : (Optional) Subroutine reference which is used to define whether to retain a node
Return type : None
 </pre><div id="codesection-collapse_tree" class="dynheader closed" style="cursor:pointer;" onclick="return toggleVisibility(this)">  
    <img id='codesection-collapse_tree-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-collapse_tree-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-collapse_tree-content' class='dyncontent' style='display: none;'> 
 <div class="fragment"><div class="line">sub <a class="code" href="classBio_1_1EnsEMBL_1_1DBSQL_1_1TaxonomyNodeAdaptor.html#a54ce8ea2ca13ac47d176599c5447303d">collapse_tree</a> {</div>
<div class="line">  my ($self, $root, $check) = @_;</div>
<div class="line">  my @nodes;</div>
<div class="line">  $check ||= sub {</div>
<div class="line">    my ($node) = @_;</div>
<div class="line">    <span class="keywordflow">return</span> ($node-&gt;taxon_id() eq $root-&gt;taxon_id() ||</div>
<div class="line">            ($node-&gt;dba() &amp;&amp; scalar(@{$node-&gt;dba()}) &gt; 0) ||</div>
<div class="line">            scalar(@{$node-&gt;children()}) != 1 ||</div>
<div class="line">            scalar(@{$node-&gt;parent()-&gt;children()}) &gt; 1);</div>
<div class="line">  };</div>
<div class="line">  $root-&gt;traverse_tree(</div>
<div class="line">    sub {</div>
</div><!-- fragment --> </div> 
</div>
</div>
<a class="anchor" id="aa17b7ee274efeb5b2fad803a3688a148"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public Int Bio::EnsEMBL::DBSQL::TaxonomyNodeAdaptor::distance_between_nodes </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre>Description : Count the number of steps in the shortest route from one node to another (via the common ancestor)
Argument    : <a class="el" href="classBio_1_1EnsEMBL_1_1TaxonomyNode.html">Bio::EnsEMBL::TaxonomyNode</a>
Argument    : <a class="el" href="classBio_1_1EnsEMBL_1_1TaxonomyNode.html">Bio::EnsEMBL::TaxonomyNode</a>
Return type : Integer
 </pre><div id="codesection-distance_between_nodes" class="dynheader closed" style="cursor:pointer;" onclick="return toggleVisibility(this)">  
    <img id='codesection-distance_between_nodes-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-distance_between_nodes-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-distance_between_nodes-content' class='dyncontent' style='display: none;'> 
 <div class="fragment"><div class="line">sub <a class="code" href="classBio_1_1EnsEMBL_1_1DBSQL_1_1TaxonomyNodeAdaptor.html#aa17b7ee274efeb5b2fad803a3688a148">distance_between_nodes</a> {</div>
<div class="line">  my ($self, $node1, $node2) = @_;</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">  # Have to preprend the end nodes to get the numbers right</span></div>
<div class="line"><span class="preprocessor"></span>  my $ancestors1 = $self-&gt;fetch_ancestors($node1);</div>
<div class="line">  my $ancestors2 = $self-&gt;fetch_ancestors($node2);</div>
<div class="line">  unshift @{$ancestors1}, $node1;</div>
<div class="line">  unshift @{$ancestors2}, $node2;</div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">for</span> (my $i = 0; $i &lt; scalar @{$ancestors1}; $i++) {</div>
<div class="line">    <span class="keywordflow">for</span> (my $j = 0; $j &lt; scalar @{$ancestors2}; $j++) {</div>
<div class="line">      <span class="keywordflow">if</span> ($ancestors1-&gt;[$i]-&gt;taxon_id == $ancestors2-&gt;[$j]-&gt;taxon_id) {</div>
<div class="line">        <span class="keywordflow">return</span> $i + $j;</div>
<div class="line">      }</div>
<div class="line">    }</div>
<div class="line">  }</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">  # Something went dreadfully wrong</span></div>
<div class="line"><span class="preprocessor"></span>  <span class="keywordflow">return</span> -1;</div>
<div class="line">}</div>
</div><!-- fragment --> </div> 
</div>
</div>
<a class="anchor" id="a847575dc0147e7f36b19fcf71250c6f7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public Arrayref Bio::EnsEMBL::DBSQL::TaxonomyNodeAdaptor::fetch_all_by_name </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre>
Description : Fetch an array of nodes which have a name LIKE the supplied String
Argument    : Name as String (can contain SQL wildcards)
Return type : Arrayref of <a class="el" href="classBio_1_1EnsEMBL_1_1TaxonomyNode.html">Bio::EnsEMBL::TaxonomyNode</a>
 </pre><div id="codesection-fetch_all_by_name" class="dynheader closed" style="cursor:pointer;" onclick="return toggleVisibility(this)">  
    <img id='codesection-fetch_all_by_name-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-fetch_all_by_name-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-fetch_all_by_name-content' class='dyncontent' style='display: none;'> 
 <div class="fragment"><div class="line">sub <a class="code" href="classBio_1_1EnsEMBL_1_1DBSQL_1_1TaxonomyNodeAdaptor.html#a847575dc0147e7f36b19fcf71250c6f7">fetch_all_by_name</a> {</div>
<div class="line">  my ($self, $name) = @_;</div>
<div class="line">  my $node =</div>
<div class="line">    $self-&gt;helper()-&gt;execute_into_hash(</div>
<div class="line">    -SQL =&gt; $base_sql .</div>
<div class="line">q{ join ncbi_taxa_name nan <span class="keyword">using</span> (taxon_id) where nan.name like ?},</div>
<div class="line">    -CALLBACK =&gt; $self-&gt;mapper(),</div>
<div class="line">    -PARAMS   =&gt; [$name]);</div>
<div class="line">  <span class="keywordflow">return</span> [values %{$node}];</div>
<div class="line">}</div>
</div><!-- fragment --> </div> 
</div>
</div>
<a class="anchor" id="a2307ee0f9c8cbe32b60f20e27454199d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public Arrayref Bio::EnsEMBL::DBSQL::TaxonomyNodeAdaptor::fetch_all_by_name_and_class </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre>
Description : Fetch an array of nodes which have a name and name class LIKE the supplied Strings
Argument    : Name as String (can contain SQL wildcards)
Argument    : Name class as String (can contain SQL wildcards)
Return type : Arrayref of <a class="el" href="classBio_1_1EnsEMBL_1_1TaxonomyNode.html">Bio::EnsEMBL::TaxonomyNode</a>
 </pre><div id="codesection-fetch_all_by_name_and_class" class="dynheader closed" style="cursor:pointer;" onclick="return toggleVisibility(this)">  
    <img id='codesection-fetch_all_by_name_and_class-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-fetch_all_by_name_and_class-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-fetch_all_by_name_and_class-content' class='dyncontent' style='display: none;'> 
 <div class="fragment"><div class="line">sub <a class="code" href="classBio_1_1EnsEMBL_1_1DBSQL_1_1TaxonomyNodeAdaptor.html#a2307ee0f9c8cbe32b60f20e27454199d">fetch_all_by_name_and_class</a> {</div>
<div class="line">  my ($self, $name, $class) = @_;</div>
<div class="line">  my $node =</div>
<div class="line">    $self-&gt;helper()-&gt;execute_into_hash(</div>
<div class="line">    -SQL =&gt; $base_sql .</div>
<div class="line">q{ join ncbi_taxa_name nan <span class="keyword">using</span> (taxon_id) where nan.name like ? and nan.name_class like ?},</div>
<div class="line">    -CALLBACK =&gt; $self-&gt;mapper(),</div>
<div class="line">    -PARAMS   =&gt; [$name, $class]);</div>
<div class="line">  <span class="keywordflow">return</span> [values %{$node}];</div>
<div class="line">}</div>
</div><!-- fragment --> </div> 
</div>
</div>
<a class="anchor" id="a3634784808148457e7768d9ac23ac51d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public Arrayref Bio::EnsEMBL::DBSQL::TaxonomyNodeAdaptor::fetch_all_by_name_and_rank </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre>
Description : Fetch an array of nodes which have the supplied rank and a name LIKE the supplied String
Argument    : Name as String (can contain SQL wildcards)
Argument    : Rank as String
Return type : Arrayref of <a class="el" href="classBio_1_1EnsEMBL_1_1TaxonomyNode.html">Bio::EnsEMBL::TaxonomyNode</a>
 </pre><div id="codesection-fetch_all_by_name_and_rank" class="dynheader closed" style="cursor:pointer;" onclick="return toggleVisibility(this)">  
    <img id='codesection-fetch_all_by_name_and_rank-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-fetch_all_by_name_and_rank-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-fetch_all_by_name_and_rank-content' class='dyncontent' style='display: none;'> 
 <div class="fragment"><div class="line">sub <a class="code" href="classBio_1_1EnsEMBL_1_1DBSQL_1_1TaxonomyNodeAdaptor.html#a3634784808148457e7768d9ac23ac51d">fetch_all_by_name_and_rank</a> {</div>
<div class="line">  my ($self, $name, $rank) = @_;</div>
<div class="line">  my $node =</div>
<div class="line">    $self-&gt;helper()-&gt;execute_into_hash(</div>
<div class="line">    -SQL =&gt; $base_sql .</div>
<div class="line">q{ join ncbi_taxa_name nan <span class="keyword">using</span> (taxon_id) where nan.name like ? and n.rank = ?},</div>
<div class="line">    -CALLBACK =&gt; $self-&gt;mapper(),</div>
<div class="line">    -PARAMS   =&gt; [$name, $rank]);</div>
<div class="line">  <span class="keywordflow">return</span> [values %{$node}];</div>
<div class="line">}</div>
</div><!-- fragment --> </div> 
</div>
</div>
<a class="anchor" id="af1052de92e3deaab5011405e31b94878"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public Arrayref Bio::EnsEMBL::DBSQL::TaxonomyNodeAdaptor::fetch_all_by_rank </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre>
Description : Fetch an array of nodes which have the supplied rank
Argument    : String
Return type : Arrayref of <a class="el" href="classBio_1_1EnsEMBL_1_1TaxonomyNode.html">Bio::EnsEMBL::TaxonomyNode</a>
 </pre><div id="codesection-fetch_all_by_rank" class="dynheader closed" style="cursor:pointer;" onclick="return toggleVisibility(this)">  
    <img id='codesection-fetch_all_by_rank-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-fetch_all_by_rank-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-fetch_all_by_rank-content' class='dyncontent' style='display: none;'> 
 <div class="fragment"><div class="line">sub <a class="code" href="classBio_1_1EnsEMBL_1_1DBSQL_1_1TaxonomyNodeAdaptor.html#af1052de92e3deaab5011405e31b94878">fetch_all_by_rank</a> {</div>
<div class="line">  my ($self, $rank) = @_;</div>
<div class="line">  my $node =</div>
<div class="line">    $self-&gt;helper()-&gt;execute_into_hash(</div>
<div class="line">                                 -SQL =&gt; $base_sql . q{ where rank = ?},</div>
<div class="line">                                 -CALLBACK =&gt; $self-&gt;mapper(),</div>
<div class="line">                                 -PARAMS   =&gt; [$rank]);</div>
<div class="line">  <span class="keywordflow">return</span> [values %{$node}];</div>
<div class="line">}</div>
</div><!-- fragment --> </div> 
</div>
</div>
<a class="anchor" id="a6498525eec319e5409bf467f85b10925"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public Arrayref Bio::EnsEMBL::DBSQL::TaxonomyNodeAdaptor::fetch_all_by_taxon_ids </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre>
Description : Fetch an array of nodes corresponding to the supplied taxonomy IDs
Argument    : Arrayref of Int
Return type : Arrayref of <a class="el" href="classBio_1_1EnsEMBL_1_1TaxonomyNode.html">Bio::EnsEMBL::TaxonomyNode</a>
 </pre><div id="codesection-fetch_all_by_taxon_ids" class="dynheader closed" style="cursor:pointer;" onclick="return toggleVisibility(this)">  
    <img id='codesection-fetch_all_by_taxon_ids-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-fetch_all_by_taxon_ids-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-fetch_all_by_taxon_ids-content' class='dyncontent' style='display: none;'> 
 <div class="fragment"><div class="line">sub <a class="code" href="classBio_1_1EnsEMBL_1_1DBSQL_1_1TaxonomyNodeAdaptor.html#a6498525eec319e5409bf467f85b10925">fetch_all_by_taxon_ids</a> {</div>
<div class="line">  my ($self, $taxon_ids) = @_;</div>
<div class="line">  my $list = join <span class="charliteral">&#39;,&#39;</span>, @$taxon_ids;</div>
<div class="line">  my $node =</div>
<div class="line">    $self-&gt;helper()-&gt;execute_into_hash(</div>
<div class="line">                     -SQL =&gt; $base_sql . qq{ where taxon_id in ($list)},</div>
<div class="line">                     -CALLBACK =&gt; $self-&gt;mapper());</div>
<div class="line">  <span class="keywordflow">return</span> [values %{$node}];</div>
<div class="line">}</div>
</div><!-- fragment --> </div> 
</div>
</div>
<a class="anchor" id="a4389669d002e2ca6caf932827b800aaf"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public Bio::EnsEMBL::DBSQL::TaxonomyNodeAdaptor::fetch_all_common_ancestors </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Undocumented method</p>
<div id="codesection-fetch_all_common_ancestors" class="dynheader closed" style="cursor:pointer;" onclick="return toggleVisibility(this)">  
    <img id='codesection-fetch_all_common_ancestors-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-fetch_all_common_ancestors-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-fetch_all_common_ancestors-content' class='dyncontent' style='display: none;'> 
 <div class="fragment"><div class="line">sub <a class="code" href="classBio_1_1EnsEMBL_1_1DBSQL_1_1TaxonomyNodeAdaptor.html#a4389669d002e2ca6caf932827b800aaf">fetch_all_common_ancestors</a> {</div>
<div class="line">  my ($self, $n1, $n2) = @_;</div>
<div class="line">  my $anc              = $self-&gt;fetch_ancestors($n1);</div>
<div class="line">  my %n1h              = map { $_-&gt;taxon_id() =&gt; $_ } @$anc;</div>
<div class="line">  my $common_ancestors = [];</div>
<div class="line">  <span class="keywordflow">for</span> my $n2n (@{$self-&gt;fetch_ancestors($n2)}) {</div>
<div class="line">    <span class="keywordflow">if</span> (defined $n1h{$n2n-&gt;taxon_id()}) {</div>
<div class="line">      push @$common_ancestors, $n2n;</div>
<div class="line">    }</div>
<div class="line">  }</div>
<div class="line">  <span class="keywordflow">return</span> [sort { $a-&gt;num_descendants() &lt;=&gt; $b-&gt;num_descendants() }</div>
<div class="line">          @{$common_ancestors}];</div>
<div class="line">}</div>
</div><!-- fragment --> </div> 
</div>
</div>
<a class="anchor" id="a0147113a768c4679c7c3ddc9a89cd69d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public Bio::EnsEMBL::DBSQL::TaxonomyNodeAdaptor::fetch_ancestor_by_rank </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Undocumented method</p>
<div id="codesection-fetch_ancestor_by_rank" class="dynheader closed" style="cursor:pointer;" onclick="return toggleVisibility(this)">  
    <img id='codesection-fetch_ancestor_by_rank-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-fetch_ancestor_by_rank-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-fetch_ancestor_by_rank-content' class='dyncontent' style='display: none;'> 
 <div class="fragment"><div class="line">sub <a class="code" href="classBio_1_1EnsEMBL_1_1DBSQL_1_1TaxonomyNodeAdaptor.html#a0147113a768c4679c7c3ddc9a89cd69d">fetch_ancestor_by_rank</a> {</div>
<div class="line">  my ($self, $n1, $rank) = @_;</div>
<div class="line">  <span class="keywordflow">return</span> $n1 <span class="keywordflow">if</span> ($n1-&gt;rank() eq $rank);</div>
<div class="line">  my @nodes = values %{</div>
<div class="line">    $self-&gt;helper()-&gt;execute_into_hash(</div>
<div class="line">      -SQL =&gt; $base_sql . q{ join ncbi_taxa_node child</div>
<div class="line">                                            on (child.left_index between n.left_index and n.right_index and n.taxon_id&lt;&gt;child.taxon_id)</div>
<div class="line">                                            where child.taxon_id=? and n.rank=?},</div>
<div class="line">      -CALLBACK =&gt; $self-&gt;<a class="code" href="classBio_1_1EnsEMBL_1_1DBSQL_1_1TaxonomyNodeAdaptor.html#a143bb1730451f74d6742661bbd989775">mapper</a>(),</div>
<div class="line">      -PARAMS   =&gt; [<a class="code" href="classBio_1_1EnsEMBL_1_1DBSQL_1_1TaxonomyNodeAdaptor.html#a74bc6bc12ca4f3f296087f2b85713855">_get_node_id</a>($n1), $rank])};</div>
<div class="line">  if (scalar @nodes &gt; 0) {</div>
<div class="line">    <span class="keywordflow">return</span> $nodes[0];</div>
<div class="line">  }</div>
<div class="line">  <span class="keywordflow">else</span> {</div>
<div class="line">    <span class="keywordflow">return</span> undef;</div>
<div class="line">  }</div>
<div class="line">}</div>
</div><!-- fragment --> </div> 
</div>
</div>
<a class="anchor" id="ac07a1294368c2815845978ffa18db9b5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public Arrayref Bio::EnsEMBL::DBSQL::TaxonomyNodeAdaptor::fetch_ancestors </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre>
Description : Fetch an array of nodes which are above the supplied node on the tree (ordered ascending up the tree)
Argument    : <a class="el" href="classBio_1_1EnsEMBL_1_1TaxonomyNode.html">Bio::EnsEMBL::TaxonomyNode</a> or ID of desired node
Return type : Arrayref of <a class="el" href="classBio_1_1EnsEMBL_1_1TaxonomyNode.html">Bio::EnsEMBL::TaxonomyNode</a>
 </pre><div id="codesection-fetch_ancestors" class="dynheader closed" style="cursor:pointer;" onclick="return toggleVisibility(this)">  
    <img id='codesection-fetch_ancestors-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-fetch_ancestors-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-fetch_ancestors-content' class='dyncontent' style='display: none;'> 
 <div class="fragment"><div class="line">sub <a class="code" href="classBio_1_1EnsEMBL_1_1DBSQL_1_1TaxonomyNodeAdaptor.html#ac07a1294368c2815845978ffa18db9b5">fetch_ancestors</a> {</div>
<div class="line">  my ($self, $node) = @_;</div>
<div class="line">  my $nodes = $self-&gt;helper()-&gt;execute_into_hash(</div>
<div class="line">    -SQL =&gt; $base_sql . q{ join ncbi_taxa_node child</div>
<div class="line">                                            on (child.left_index between n.left_index and n.right_index and n.taxon_id&lt;&gt;child.taxon_id)</div>
<div class="line">                                            where child.taxon_id=?},</div>
<div class="line">    -CALLBACK =&gt; $self-&gt;<a class="code" href="classBio_1_1EnsEMBL_1_1DBSQL_1_1TaxonomyNodeAdaptor.html#a143bb1730451f74d6742661bbd989775">mapper</a>(),</div>
<div class="line">    -PARAMS   =&gt; [<a class="code" href="classBio_1_1EnsEMBL_1_1DBSQL_1_1TaxonomyNodeAdaptor.html#a74bc6bc12ca4f3f296087f2b85713855">_get_node_id</a>($node)]);</div>
<div class="line">  return [sort { $a-&gt;num_descendants() &lt;=&gt; $b-&gt;num_descendants() }</div>
<div class="line">          values %{$nodes}];</div>
<div class="line">}</div>
</div><!-- fragment --> </div> 
</div>
</div>
<a class="anchor" id="a0b5c7cbb3d249793ce0c3eae5baa41b4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public <a class="el" href="classBio_1_1EnsEMBL_1_1TaxonomyNode.html">Bio::EnsEMBL::TaxonomyNode</a> Bio::EnsEMBL::DBSQL::TaxonomyNodeAdaptor::fetch_by_coredbadaptor </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre>
Description : Fetch a single node corresponding to the taxonomy ID found in the supplied Ensembl DBAdaptor. Warning: Passing 2 different DBAs with the same taxid will yield two distinct Node objects which will need merging! COnsider using fetch_by_coredbadaptors instead.
Argument    : Bio::EnsEMBL::DBSQL::DBAdaptor
Return type : <a class="el" href="classBio_1_1EnsEMBL_1_1TaxonomyNode.html">Bio::EnsEMBL::TaxonomyNode</a>
 </pre><div id="codesection-fetch_by_coredbadaptor" class="dynheader closed" style="cursor:pointer;" onclick="return toggleVisibility(this)">  
    <img id='codesection-fetch_by_coredbadaptor-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-fetch_by_coredbadaptor-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-fetch_by_coredbadaptor-content' class='dyncontent' style='display: none;'> 
 <div class="fragment"><div class="line">sub <a class="code" href="classBio_1_1EnsEMBL_1_1DBSQL_1_1TaxonomyNodeAdaptor.html#a0b5c7cbb3d249793ce0c3eae5baa41b4">fetch_by_coredbadaptor</a> {</div>
<div class="line">  my ($self, $core_dba) = @_;</div>
<div class="line"><span class="preprocessor">  # get taxid from core</span></div>
<div class="line"><span class="preprocessor"></span>  my $taxid = $core_dba-&gt;get_MetaContainer()-&gt;get_taxonomy_id();</div>
<div class="line">  <span class="keywordflow">if</span> (!defined $taxid) {</div>
<div class="line">    <span class="keywordflow">throw</span>(<span class="stringliteral">&quot;Could not find taxonomy ID for database &quot;</span> .</div>
<div class="line">          $core_dba-&gt;species());</div>
<div class="line">  }</div>
<div class="line">  my $node = $self-&gt;fetch_by_taxon_id($taxid);</div>
<div class="line">  <span class="keywordflow">if</span> ($node) {</div>
<div class="line">    push @{$node-&gt;<a class="code" href="classBio_1_1EnsEMBL_1_1TaxonomyNode.html#a5ad1007303ac34b1dc944b4c67ee91f6">dba</a>()}, $core_dba;</div>
<div class="line">  }</div>
<div class="line">  <span class="keywordflow">return</span> $node;</div>
<div class="line">}</div>
</div><!-- fragment --> </div> 
</div>
</div>
<a class="anchor" id="a8d27def74c4f8035c995f7400000fa28"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public Arrayref Bio::EnsEMBL::DBSQL::TaxonomyNodeAdaptor::fetch_by_coredbadaptors </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre>
Description : Fetch an array of nodes corresponding to the taxonomy IDs found in the supplied Ensembl DBAdaptors.
Argument    : Bio::EnsEMBL::DBSQL::DBAdaptor
Return type : Arrayref of <a class="el" href="classBio_1_1EnsEMBL_1_1TaxonomyNode.html">Bio::EnsEMBL::TaxonomyNode</a>
 </pre><div id="codesection-fetch_by_coredbadaptors" class="dynheader closed" style="cursor:pointer;" onclick="return toggleVisibility(this)">  
    <img id='codesection-fetch_by_coredbadaptors-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-fetch_by_coredbadaptors-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-fetch_by_coredbadaptors-content' class='dyncontent' style='display: none;'> 
 <div class="fragment"><div class="line">sub <a class="code" href="classBio_1_1EnsEMBL_1_1DBSQL_1_1TaxonomyNodeAdaptor.html#a8d27def74c4f8035c995f7400000fa28">fetch_by_coredbadaptors</a> {</div>
<div class="line">  my ($self, $core_dbas) = @_;</div>
<div class="line">  my $nodes_by_taxa = {};</div>
<div class="line">  <span class="keywordflow">for</span> my $core_dba (@$core_dbas) {</div>
<div class="line">    my $taxid = $core_dba-&gt;get_MetaContainer()-&gt;get_taxonomy_id();</div>
<div class="line">    <span class="keywordflow">if</span> (!defined $taxid) {</div>
<div class="line">      <span class="keywordflow">throw</span>(<span class="stringliteral">&quot;Could not find taxonomy ID for database &quot;</span> .</div>
<div class="line">            $core_dba-&gt;species());</div>
<div class="line">    }</div>
<div class="line">    my $node = $nodes_by_taxa-&gt;{$taxid};</div>
<div class="line">    <span class="keywordflow">if</span> (!defined $node) {</div>
<div class="line">      $node = $self-&gt;fetch_by_taxon_id($taxid);</div>
<div class="line">      <span class="keywordflow">if</span> (!defined $node) {</div>
<div class="line">        warn <span class="stringliteral">&quot;Could not find taxonomy node for &quot;</span> .</div>
<div class="line">          $core_dba-&gt;species() . <span class="stringliteral">&quot; with taxonomy ID $taxid&quot;</span>;</div>
<div class="line">      }</div>
<div class="line">      <span class="keywordflow">else</span> {</div>
<div class="line">        $nodes_by_taxa-&gt;{$taxid} = $node;</div>
<div class="line">      }</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">if</span> (defined $node) {</div>
<div class="line">      push @{$node-&gt;dba()}, $core_dba;</div>
<div class="line">    }</div>
<div class="line">  }</div>
<div class="line">  <span class="keywordflow">return</span> [values(%$nodes_by_taxa)];</div>
<div class="line">} ## end sub <a class="code" href="classBio_1_1EnsEMBL_1_1DBSQL_1_1TaxonomyNodeAdaptor.html#a8d27def74c4f8035c995f7400000fa28">fetch_by_coredbadaptors</a></div>
</div><!-- fragment --> </div> 
</div>
</div>
<a class="anchor" id="a146f983269d80d82d56f12024b8df6a1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public <a class="el" href="classBio_1_1EnsEMBL_1_1TaxonomyNode.html">Bio::EnsEMBL::TaxonomyNode</a> Bio::EnsEMBL::DBSQL::TaxonomyNodeAdaptor::fetch_by_taxon_id </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre>
Description : Fetch a single node corresponding to the supplied taxon ID.
Argument    : Int
Return type : <a class="el" href="classBio_1_1EnsEMBL_1_1TaxonomyNode.html">Bio::EnsEMBL::TaxonomyNode</a>
 </pre><div id="codesection-fetch_by_taxon_id" class="dynheader closed" style="cursor:pointer;" onclick="return toggleVisibility(this)">  
    <img id='codesection-fetch_by_taxon_id-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-fetch_by_taxon_id-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-fetch_by_taxon_id-content' class='dyncontent' style='display: none;'> 
 <div class="fragment"><div class="line">sub <a class="code" href="classBio_1_1EnsEMBL_1_1DBSQL_1_1TaxonomyNodeAdaptor.html#a146f983269d80d82d56f12024b8df6a1">fetch_by_taxon_id</a> {</div>
<div class="line">  my ($self, $taxon_id) = @_;</div>
<div class="line">  my $node =</div>
<div class="line">    $self-&gt;helper()-&gt;execute_into_hash(</div>
<div class="line">                             -SQL =&gt; $base_sql . q{ where taxon_id = ?},</div>
<div class="line">                             -CALLBACK =&gt; $self-&gt;mapper(),</div>
<div class="line">                             -PARAMS   =&gt; [$taxon_id]);</div>
<div class="line">  <span class="keywordflow">return</span> $node-&gt;{$taxon_id};</div>
<div class="line">}</div>
</div><!-- fragment --> </div> 
</div>
</div>
<a class="anchor" id="a364b98bccc677236aa399c54af34ac77"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public <a class="el" href="classBio_1_1EnsEMBL_1_1TaxonomyNode.html">Bio::EnsEMBL::TaxonomyNode</a> Bio::EnsEMBL::DBSQL::TaxonomyNodeAdaptor::fetch_by_taxon_name </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre>
Description : Fetch a single node where the name is as specified
Argument    : String
Return type : <a class="el" href="classBio_1_1EnsEMBL_1_1TaxonomyNode.html">Bio::EnsEMBL::TaxonomyNode</a>
 </pre><div id="codesection-fetch_by_taxon_name" class="dynheader closed" style="cursor:pointer;" onclick="return toggleVisibility(this)">  
    <img id='codesection-fetch_by_taxon_name-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-fetch_by_taxon_name-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-fetch_by_taxon_name-content' class='dyncontent' style='display: none;'> 
 <div class="fragment"><div class="line">sub <a class="code" href="classBio_1_1EnsEMBL_1_1DBSQL_1_1TaxonomyNodeAdaptor.html#a364b98bccc677236aa399c54af34ac77">fetch_by_taxon_name</a> {</div>
<div class="line">  my ($self, $name) = @_;</div>
<div class="line">  my $node =</div>
<div class="line">    $self-&gt;helper()-&gt;execute_into_hash(</div>
<div class="line">                             -SQL =&gt; $base_sql .</div>
<div class="line">q{ join ncbi_taxa_name nan <span class="keyword">using</span> (taxon_id) where nan.name=?},</div>
<div class="line">                             -CALLBACK =&gt; $self-&gt;mapper(),</div>
<div class="line">                             -PARAMS   =&gt; [$name]);</div>
<div class="line">  <span class="keywordflow">return</span> <a class="code" href="classBio_1_1EnsEMBL_1_1DBSQL_1_1TaxonomyNodeAdaptor.html#a91f40539b36cd65240cc07c074ff2310">_first_element</a>([values(%$node)]);</div>
<div class="line">}</div>
</div><!-- fragment --> </div> 
</div>
</div>
<a class="anchor" id="ab0fd45baeccfc5ff5b2b4af3f52e699e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public Arrayref Bio::EnsEMBL::DBSQL::TaxonomyNodeAdaptor::fetch_children </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre>
Description : Fetch an array of nodes for which the parent is the supplied node
Argument    : <a class="el" href="classBio_1_1EnsEMBL_1_1TaxonomyNode.html">Bio::EnsEMBL::TaxonomyNode</a> or ID of desired node
Return type : Arrayref of <a class="el" href="classBio_1_1EnsEMBL_1_1TaxonomyNode.html">Bio::EnsEMBL::TaxonomyNode</a>
 </pre><div id="codesection-fetch_children" class="dynheader closed" style="cursor:pointer;" onclick="return toggleVisibility(this)">  
    <img id='codesection-fetch_children-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-fetch_children-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-fetch_children-content' class='dyncontent' style='display: none;'> 
 <div class="fragment"><div class="line">sub <a class="code" href="classBio_1_1EnsEMBL_1_1DBSQL_1_1TaxonomyNodeAdaptor.html#ab0fd45baeccfc5ff5b2b4af3f52e699e">fetch_children</a> {</div>
<div class="line">  my ($self, $parent) = @_;</div>
<div class="line">  my $node =</div>
<div class="line">    $self-&gt;helper()-&gt;execute_into_hash(</div>
<div class="line">                            -SQL =&gt; $base_sql . q{ where parent_id = ?},</div>
<div class="line">                            -CALLBACK =&gt; $self-&gt;mapper(),</div>
<div class="line">                            -PARAMS   =&gt; [<a class="code" href="classBio_1_1EnsEMBL_1_1DBSQL_1_1TaxonomyNodeAdaptor.html#a74bc6bc12ca4f3f296087f2b85713855">_get_node_id</a>($parent)]);</div>
<div class="line">  <span class="keywordflow">return</span> [sort { $a-&gt;num_descendants() &lt;=&gt; $b-&gt;num_descendants() }</div>
<div class="line">          values %{$node}];</div>
<div class="line">}</div>
</div><!-- fragment --> </div> 
</div>
</div>
<a class="anchor" id="af7d2f5acd1d17eace8d94a48a0782790"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public Bio::EnsEMBL::DBSQL::TaxonomyNodeAdaptor::fetch_common_ancestor </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Undocumented method</p>
<div id="codesection-fetch_common_ancestor" class="dynheader closed" style="cursor:pointer;" onclick="return toggleVisibility(this)">  
    <img id='codesection-fetch_common_ancestor-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-fetch_common_ancestor-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-fetch_common_ancestor-content' class='dyncontent' style='display: none;'> 
 <div class="fragment"><div class="line">sub <a class="code" href="classBio_1_1EnsEMBL_1_1DBSQL_1_1TaxonomyNodeAdaptor.html#af7d2f5acd1d17eace8d94a48a0782790">fetch_common_ancestor</a> {</div>
<div class="line">  my ($self, $n1, $n2) = @_;</div>
<div class="line">  my $anc = $self-&gt;fetch_all_common_ancestors($n1, $n2);</div>
<div class="line">  <span class="keywordflow">return</span> scalar(@$anc) &gt; 0 ? $anc-&gt;[0] : undef;</div>
<div class="line">}</div>
</div><!-- fragment --> </div> 
</div>
</div>
<a class="anchor" id="adfff44f58da57d1fbb0d9d466c32dbba"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public Arrayref Bio::EnsEMBL::DBSQL::TaxonomyNodeAdaptor::fetch_descendant_ids </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre>
Description : Fetch an array of taxon IDs below the supplied node on the tree
Argument    : <a class="el" href="classBio_1_1EnsEMBL_1_1TaxonomyNode.html">Bio::EnsEMBL::TaxonomyNode</a> or ID of desired node
Return type : Arrayref of integers
 </pre><div id="codesection-fetch_descendant_ids" class="dynheader closed" style="cursor:pointer;" onclick="return toggleVisibility(this)">  
    <img id='codesection-fetch_descendant_ids-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-fetch_descendant_ids-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-fetch_descendant_ids-content' class='dyncontent' style='display: none;'> 
 <div class="fragment"><div class="line">sub <a class="code" href="classBio_1_1EnsEMBL_1_1DBSQL_1_1TaxonomyNodeAdaptor.html#adfff44f58da57d1fbb0d9d466c32dbba">fetch_descendant_ids</a> {</div>
<div class="line">  my ($self, $node) = @_;</div>
<div class="line">  my $sql = q/select n.taxon_id from ncbi_taxa_node n join ncbi_taxa_node parent </div>
<div class="line">            on (n.left_index between parent.left_index and parent.right_index and n.taxon_id&lt;&gt;parent.taxon_id)</div>
<div class="line">            where parent.taxon_id=?/;</div>
<div class="line">  return  $self-&gt;<a class="code" href="classBio_1_1EnsEMBL_1_1DBSQL_1_1TaxonomyNodeAdaptor.html#a928c8d80cd69b686228238604f2ebf52">helper</a>()-&gt;execute_simple(</div>
<div class="line">    -SQL =&gt; $sql,</div>
<div class="line">    -PARAMS   =&gt; [<a class="code" href="classBio_1_1EnsEMBL_1_1DBSQL_1_1TaxonomyNodeAdaptor.html#a74bc6bc12ca4f3f296087f2b85713855">_get_node_id</a>($node)]);</div>
<div class="line">}</div>
</div><!-- fragment --> </div> 
</div>
</div>
<a class="anchor" id="ae75c96b99f505385c7729d1090785ee3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public Arrayref Bio::EnsEMBL::DBSQL::TaxonomyNodeAdaptor::fetch_descendants </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre>
Description : Fetch an array of nodes below the supplied node on the tree
Argument    : <a class="el" href="classBio_1_1EnsEMBL_1_1TaxonomyNode.html">Bio::EnsEMBL::TaxonomyNode</a> or ID of desired node
Return type : Arrayref of <a class="el" href="classBio_1_1EnsEMBL_1_1TaxonomyNode.html">Bio::EnsEMBL::TaxonomyNode</a>
 </pre><div id="codesection-fetch_descendants" class="dynheader closed" style="cursor:pointer;" onclick="return toggleVisibility(this)">  
    <img id='codesection-fetch_descendants-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-fetch_descendants-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-fetch_descendants-content' class='dyncontent' style='display: none;'> 
 <div class="fragment"><div class="line">sub <a class="code" href="classBio_1_1EnsEMBL_1_1DBSQL_1_1TaxonomyNodeAdaptor.html#ae75c96b99f505385c7729d1090785ee3">fetch_descendants</a> {</div>
<div class="line">  my ($self, $node) = @_;</div>
<div class="line">  my $sql = $base_sql . q{ join ncbi_taxa_node parent </div>
<div class="line">            on (n.left_index between parent.left_index and parent.right_index and n.taxon_id&lt;&gt;parent.taxon_id)</div>
<div class="line">            where parent.taxon_id=?};</div>
<div class="line">  my $nodes = $self-&gt;<a class="code" href="classBio_1_1EnsEMBL_1_1DBSQL_1_1TaxonomyNodeAdaptor.html#a928c8d80cd69b686228238604f2ebf52">helper</a>()-&gt;execute_into_hash(</div>
<div class="line">    -SQL =&gt; $sql,</div>
<div class="line">    -CALLBACK =&gt; $self-&gt;mapper(),</div>
<div class="line">    -PARAMS   =&gt; [<a class="code" href="classBio_1_1EnsEMBL_1_1DBSQL_1_1TaxonomyNodeAdaptor.html#a74bc6bc12ca4f3f296087f2b85713855">_get_node_id</a>($node)]);</div>
<div class="line">  return [sort { $a-&gt;num_descendants() &lt;=&gt; $b-&gt;num_descendants() }</div>
<div class="line">          values %{$nodes}];</div>
<div class="line">}</div>
</div><!-- fragment --> </div> 
</div>
</div>
<a class="anchor" id="a9b636d26c4e31842a9a023780a8990b9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public Arrayref Bio::EnsEMBL::DBSQL::TaxonomyNodeAdaptor::fetch_descendants_offset </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre>
Description : Fetch an array of nodes below the node the specified number of levels on the tree above the specified node
Argument    : <a class="el" href="classBio_1_1EnsEMBL_1_1TaxonomyNode.html">Bio::EnsEMBL::TaxonomyNode</a> or ID of desired node
Argument    : offset (number of rows to move up tree before getting descendants - default is 1)
Return type : Arrayref of <a class="el" href="classBio_1_1EnsEMBL_1_1TaxonomyNode.html">Bio::EnsEMBL::TaxonomyNode</a>
 </pre><div id="codesection-fetch_descendants_offset" class="dynheader closed" style="cursor:pointer;" onclick="return toggleVisibility(this)">  
    <img id='codesection-fetch_descendants_offset-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-fetch_descendants_offset-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-fetch_descendants_offset-content' class='dyncontent' style='display: none;'> 
 <div class="fragment"><div class="line">sub <a class="code" href="classBio_1_1EnsEMBL_1_1DBSQL_1_1TaxonomyNodeAdaptor.html#a9b636d26c4e31842a9a023780a8990b9">fetch_descendants_offset</a> {</div>
<div class="line">  my ($self, $node, $offset) = @_;</div>
<div class="line">  $offset ||= 1;</div>
<div class="line">  $node = $self-&gt;_get_node($node);</div>
<div class="line">  <span class="keywordflow">while</span> ($offset-- &gt; 0) {</div>
<div class="line">    $node = $self-&gt;fetch_parent($node);</div>
<div class="line">    <span class="keywordflow">throw</span> <span class="stringliteral">&quot;No parent found for offset query&quot;</span> unless (defined $node);</div>
<div class="line">  }</div>
<div class="line">  <span class="keywordflow">return</span> $self-&gt;fetch_descendants($node);</div>
<div class="line">}</div>
</div><!-- fragment --> </div> 
</div>
</div>
<a class="anchor" id="a6f018c4e7c29a6dc11feb35f9a24c336"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public Arrayref Bio::EnsEMBL::DBSQL::TaxonomyNodeAdaptor::fetch_leaf_nodes </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre>
Description : Fetch an array of nodes which are the leaves below the supplied node on the tree
Argument    : <a class="el" href="classBio_1_1EnsEMBL_1_1TaxonomyNode.html">Bio::EnsEMBL::TaxonomyNode</a> or ID of desired node
Return type : Arrayref of <a class="el" href="classBio_1_1EnsEMBL_1_1TaxonomyNode.html">Bio::EnsEMBL::TaxonomyNode</a>
 </pre><div id="codesection-fetch_leaf_nodes" class="dynheader closed" style="cursor:pointer;" onclick="return toggleVisibility(this)">  
    <img id='codesection-fetch_leaf_nodes-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-fetch_leaf_nodes-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-fetch_leaf_nodes-content' class='dyncontent' style='display: none;'> 
 <div class="fragment"><div class="line">sub <a class="code" href="classBio_1_1EnsEMBL_1_1DBSQL_1_1TaxonomyNodeAdaptor.html#a6f018c4e7c29a6dc11feb35f9a24c336">fetch_leaf_nodes</a> {</div>
<div class="line">  my ($self, $node) = @_;</div>
<div class="line">  my $nodes = $self-&gt;helper()-&gt;execute_into_hash(</div>
<div class="line">    -SQL =&gt; $base_sql . q{ join ncbi_taxa_node parent </div>
<div class="line">            on (n.left_index between parent.left_index and parent.right_index and n.taxon_id&lt;&gt;parent.taxon_id)</div>
<div class="line">            where parent.taxon_id=? and n.right_index=n.left_index+1},</div>
<div class="line">    -CALLBACK =&gt; $self-&gt;mapper(),</div>
<div class="line">    -PARAMS   =&gt; [<a class="code" href="classBio_1_1EnsEMBL_1_1DBSQL_1_1TaxonomyNodeAdaptor.html#a74bc6bc12ca4f3f296087f2b85713855">_get_node_id</a>($node)]);</div>
<div class="line">  return [values %{$nodes}];</div>
<div class="line">}</div>
</div><!-- fragment --> </div> 
</div>
</div>
<a class="anchor" id="a865809d8ad7f9bac8c618ca44ecdb7ac"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public <a class="el" href="classBio_1_1EnsEMBL_1_1TaxonomyNode.html">Bio::EnsEMBL::TaxonomyNode</a> Bio::EnsEMBL::DBSQL::TaxonomyNodeAdaptor::fetch_parent </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre> 
Description : Fetch a single node corresponding to the parent of the node
Argument    : <a class="el" href="classBio_1_1EnsEMBL_1_1TaxonomyNode.html">Bio::EnsEMBL::TaxonomyNode</a> or ID of desired node
Return type : <a class="el" href="classBio_1_1EnsEMBL_1_1TaxonomyNode.html">Bio::EnsEMBL::TaxonomyNode</a>
 </pre><div id="codesection-fetch_parent" class="dynheader closed" style="cursor:pointer;" onclick="return toggleVisibility(this)">  
    <img id='codesection-fetch_parent-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-fetch_parent-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-fetch_parent-content' class='dyncontent' style='display: none;'> 
 <div class="fragment"><div class="line">sub <a class="code" href="classBio_1_1EnsEMBL_1_1DBSQL_1_1TaxonomyNodeAdaptor.html#a865809d8ad7f9bac8c618ca44ecdb7ac">fetch_parent</a> {</div>
<div class="line">  my ($self, $child) = @_;</div>
<div class="line">  $child = $self-&gt;_get_node($child);</div>
<div class="line">  my $node =</div>
<div class="line">    $self-&gt;helper()-&gt;execute_into_hash(</div>
<div class="line">                             -SQL =&gt; $base_sql . q{ where taxon_id = ?},</div>
<div class="line">                             -CALLBACK =&gt; $self-&gt;mapper(),</div>
<div class="line">                             -PARAMS   =&gt; [$child-&gt;parent_id()]);</div>
<div class="line">  <span class="keywordflow">return</span> $node-&gt;{$child-&gt;<a class="code" href="classBio_1_1EnsEMBL_1_1TaxonomyNode.html#a8412e9f7faf096e12ff53cb699b13cf9">parent_id</a>()};</div>
<div class="line">}</div>
</div><!-- fragment --> </div> 
</div>
</div>
<a class="anchor" id="acb7cae1f0233c91c5fb7cfdc4d66d952"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public <a class="el" href="classBio_1_1EnsEMBL_1_1TaxonomyNode.html">Bio::EnsEMBL::TaxonomyNode</a> Bio::EnsEMBL::DBSQL::TaxonomyNodeAdaptor::fetch_root </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre>
Description : Fetch a single node corresponding to the root of the supplied node
Argument    : <a class="el" href="classBio_1_1EnsEMBL_1_1TaxonomyNode.html">Bio::EnsEMBL::TaxonomyNode</a> or ID of desired node
Return type : <a class="el" href="classBio_1_1EnsEMBL_1_1TaxonomyNode.html">Bio::EnsEMBL::TaxonomyNode</a>
 </pre><div id="codesection-fetch_root" class="dynheader closed" style="cursor:pointer;" onclick="return toggleVisibility(this)">  
    <img id='codesection-fetch_root-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-fetch_root-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-fetch_root-content' class='dyncontent' style='display: none;'> 
 <div class="fragment"><div class="line">sub <a class="code" href="classBio_1_1EnsEMBL_1_1DBSQL_1_1TaxonomyNodeAdaptor.html#acb7cae1f0233c91c5fb7cfdc4d66d952">fetch_root</a> {</div>
<div class="line">  my ($self, $child) = @_;</div>
<div class="line">  $child = $self-&gt;_get_node($child);</div>
<div class="line">  my $node =</div>
<div class="line">    $self-&gt;helper()-&gt;execute_into_hash(</div>
<div class="line">                             -SQL =&gt; $base_sql . q{ where taxon_id = ?},</div>
<div class="line">                             -CALLBACK =&gt; $self-&gt;mapper(),</div>
<div class="line">                             -PARAMS   =&gt; [$child-&gt;root_id()]);</div>
<div class="line">  <span class="keywordflow">return</span> $node-&gt;{$child-&gt;<a class="code" href="classBio_1_1EnsEMBL_1_1TaxonomyNode.html#a6052d12c274e1602442ec518ca46390f">root_id</a>()};</div>
<div class="line">}</div>
</div><!-- fragment --> </div> 
</div>
</div>
<a class="anchor" id="a928c8d80cd69b686228238604f2ebf52"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public Bio::EnsEMBL::DBSQL::TaxonomyNodeAdaptor::helper </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Undocumented method</p>
<div id="codesection-helper" class="dynheader closed" style="cursor:pointer;" onclick="return toggleVisibility(this)">  
    <img id='codesection-helper-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-helper-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-helper-content' class='dyncontent' style='display: none;'> 
 <div class="fragment"><div class="line">sub <a class="code" href="classBio_1_1EnsEMBL_1_1DBSQL_1_1TaxonomyNodeAdaptor.html#a928c8d80cd69b686228238604f2ebf52">helper</a> {</div>
<div class="line">  my ($self) = @_;</div>
<div class="line">  <span class="keywordflow">if</span> (!defined $self-&gt;{<a class="code" href="classBio_1_1EnsEMBL_1_1DBSQL_1_1TaxonomyNodeAdaptor.html#a928c8d80cd69b686228238604f2ebf52">helper</a>}) {</div>
<div class="line">    $self-&gt;{<a class="code" href="classBio_1_1EnsEMBL_1_1DBSQL_1_1TaxonomyNodeAdaptor.html#a928c8d80cd69b686228238604f2ebf52">helper</a>} = Bio::EnsEMBL::Utils::SqlHelper-&gt;new(</div>
<div class="line">                                        -DB_CONNECTION =&gt; $self-&gt;dbc());</div>
<div class="line">  }</div>
<div class="line">  <span class="keywordflow">return</span> $self-&gt;{<a class="code" href="classBio_1_1EnsEMBL_1_1DBSQL_1_1TaxonomyNodeAdaptor.html#a928c8d80cd69b686228238604f2ebf52">helper</a>};</div>
<div class="line">}</div>
</div><!-- fragment --> </div> 
</div>
</div>
<a class="anchor" id="a143bb1730451f74d6742661bbd989775"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public Bio::EnsEMBL::DBSQL::TaxonomyNodeAdaptor::mapper </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre> </pre><div id="codesection-mapper" class="dynheader closed" style="cursor:pointer;" onclick="return toggleVisibility(this)">  
    <img id='codesection-mapper-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-mapper-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-mapper-content' class='dyncontent' style='display: none;'> 
 <div class="fragment"><div class="line">sub mapper {</div>
<div class="line">  my ($self) = @_;</div>
<div class="line">  <span class="keywordflow">if</span> (!defined $self-&gt;{mapper}) {</div>
<div class="line">    $self-&gt;{mapper} = sub {</div>
<div class="line">      my @row   = @{shift @_};</div>
<div class="line">      my $value = shift;</div>
<div class="line">      <span class="keywordflow">if</span> (!$value) {</div>
<div class="line">        $value =</div>
<div class="line">          <a class="code" href="classBio_1_1EnsEMBL_1_1TaxonomyNode.html">Bio::EnsEMBL::TaxonomyNode</a>-&gt;<a class="code" href="classBio_1_1EnsEMBL_1_1TaxonomyNode.html#a2b2d63b1cb0a7e146f8a60d449c48af9">new</a>(-TAXON_ID    =&gt; $row[0],</div>
<div class="line">                                          -PARENT_ID   =&gt; $row[1],</div>
<div class="line">                                          -RANK        =&gt; $row[2],</div>
<div class="line">                                          -ROOT_ID     =&gt; $row[3],</div>
<div class="line">                                          -LEFT_INDEX  =&gt; $row[4],</div>
<div class="line">                                          -RIGHT_INDEX =&gt; $row[5],</div>
<div class="line">                                          -ADAPTOR     =&gt; $self);</div>
<div class="line">      }</div>
<div class="line">      push @{$value-&gt;names()-&gt;{$row[6]}}, $row[7];</div>
<div class="line">      <span class="keywordflow">return</span> $value;</div>
<div class="line">    };</div>
<div class="line">  }</div>
<div class="line">  <span class="keywordflow">return</span> $self-&gt;{mapper};</div>
<div class="line">}</div>
</div><!-- fragment --> </div> 
</div>
</div>
<a class="anchor" id="a8f07fa12d6dfa71850bdfbc28cb07e2d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public <a class="el" href="classBio_1_1EnsEMBL_1_1DBSQL_1_1TaxonomyNodeAdaptor.html">Bio::EnsEMBL::DBSQL::TaxonomyNodeAdaptor</a> Bio::EnsEMBL::DBSQL::TaxonomyNodeAdaptor::new_public </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre>
    Description : Build a new adaptor from the public database
    Returns     : <a class="el" href="classBio_1_1EnsEMBL_1_1DBSQL_1_1TaxonomyNodeAdaptor.html">Bio::EnsEMBL::DBSQL::TaxonomyNodeAdaptor</a>
 </pre><div id="codesection-new_public" class="dynheader closed" style="cursor:pointer;" onclick="return toggleVisibility(this)">  
    <img id='codesection-new_public-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-new_public-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-new_public-content' class='dyncontent' style='display: none;'> 
 <div class="fragment"><div class="line">sub <a class="code" href="classBio_1_1EnsEMBL_1_1DBSQL_1_1TaxonomyNodeAdaptor.html#a8f07fa12d6dfa71850bdfbc28cb07e2d">new_public</a> {</div>
<div class="line">  <span class="keywordflow">return</span></div>
<div class="line">    <a class="code" href="classBio_1_1EnsEMBL_1_1DBSQL_1_1TaxonomyNodeAdaptor.html">Bio::EnsEMBL::DBSQL::TaxonomyNodeAdaptor</a>-&gt;new(<a class="code" href="classBio_1_1EnsEMBL_1_1DBSQL_1_1TaxonomyDBAdaptor.html">Bio::EnsEMBL::DBSQL::TaxonomyDBAdaptor</a>-&gt;<a class="code" href="classBio_1_1EnsEMBL_1_1DBSQL_1_1TaxonomyNodeAdaptor.html#a8f07fa12d6dfa71850bdfbc28cb07e2d">new_public</a>());</div>
<div class="line">}</div>
</div><!-- fragment --> </div> 
</div>
</div>
<a class="anchor" id="a5f444369045685840c32e06cdf0ccaae"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public Boolean Bio::EnsEMBL::DBSQL::TaxonomyNodeAdaptor::node_has_ancestor </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre>
Description : Find if one node has another as an ancestor
Argument    : <a class="el" href="classBio_1_1EnsEMBL_1_1TaxonomyNode.html">Bio::EnsEMBL::TaxonomyNode</a> or ID of desired node
Argument    : <a class="el" href="classBio_1_1EnsEMBL_1_1TaxonomyNode.html">Bio::EnsEMBL::TaxonomyNode</a> or ID of ancestor
Return type : 1 if ancestor 
 </pre><div id="codesection-node_has_ancestor" class="dynheader closed" style="cursor:pointer;" onclick="return toggleVisibility(this)">  
    <img id='codesection-node_has_ancestor-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-node_has_ancestor-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-node_has_ancestor-content' class='dyncontent' style='display: none;'> 
 <div class="fragment"><div class="line">sub <a class="code" href="classBio_1_1EnsEMBL_1_1DBSQL_1_1TaxonomyNodeAdaptor.html#a5f444369045685840c32e06cdf0ccaae">node_has_ancestor</a> {</div>
<div class="line">  my ($self, $node, $ancestor) = @_;</div>
<div class="line"> <span class="keywordflow">return</span> $self-&gt;helper()-&gt;execute_single_result(</div>
<div class="line">    -SQL =&gt;</div>
<div class="line">      q/select count(*) from ncbi_taxa_node n join ncbi_taxa_node child</div>
<div class="line">                                            on (child.left_index between n.left_index and n.right_index and n.taxon_id&lt;&gt;child.taxon_id)</div>
<div class="line">                                            where child.taxon_id=? and n.taxon_id=?/,</div>
<div class="line">    -PARAMS =&gt; [<a class="code" href="classBio_1_1EnsEMBL_1_1DBSQL_1_1TaxonomyNodeAdaptor.html#a74bc6bc12ca4f3f296087f2b85713855">_get_node_id</a>($node), <a class="code" href="classBio_1_1EnsEMBL_1_1DBSQL_1_1TaxonomyNodeAdaptor.html#a74bc6bc12ca4f3f296087f2b85713855">_get_node_id</a>($ancestor)]);</div>
<div class="line">}</div>
</div><!-- fragment --> </div> 
</div>
</div>
<a class="anchor" id="a02d590171e2d14da87085d57116d751f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public void Bio::EnsEMBL::DBSQL::TaxonomyNodeAdaptor::set_num_descendants </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre>
Description : Traverse the supplied tree setting number of descendants based on current tree structure
Argument    : <a class="el" href="classBio_1_1EnsEMBL_1_1TaxonomyNode.html">Bio::EnsEMBL::TaxonomyNode</a>
Return type : None
 </pre><div id="codesection-set_num_descendants" class="dynheader closed" style="cursor:pointer;" onclick="return toggleVisibility(this)">  
    <img id='codesection-set_num_descendants-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-set_num_descendants-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-set_num_descendants-content' class='dyncontent' style='display: none;'> 
 <div class="fragment"><div class="line">sub <a class="code" href="classBio_1_1EnsEMBL_1_1DBSQL_1_1TaxonomyNodeAdaptor.html#a02d590171e2d14da87085d57116d751f">set_num_descendants</a> {</div>
<div class="line">  my ($self, $node) = @_;</div>
<div class="line">  $node-&gt;{num_descendants} = 0;</div>
<div class="line">  <span class="keywordflow">for</span> my $child (@{$node-&gt;children()}) {</div>
<div class="line">    $node-&gt;{num_descendants} += 1 + $self-&gt;set_num_descendants($child);</div>
<div class="line">  }</div>
<div class="line">  <span class="keywordflow">return</span> $node-&gt;num_descendants();</div>
<div class="line">}</div>
</div><!-- fragment --> </div> 
</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>modules/Bio/EnsEMBL/DBSQL/TaxonomyNodeAdaptor.pm</li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.3.1
</small></address>
</body>
</html>
